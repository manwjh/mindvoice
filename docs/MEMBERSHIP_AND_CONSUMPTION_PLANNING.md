# MindVoice ä¼šå‘˜ä½“ç³»ä¸æ¶ˆè´¹è®¡é‡å®Œæ•´è§„åˆ’æ–‡æ¡£

> **ç‰ˆæœ¬**: v1.1ï¼ˆæœ€ç»ˆæ¸…æ´å®æ–½ç‰ˆï¼‰  
> **æ—¥æœŸ**: 2026-01-05  
> **çŠ¶æ€**: è§„åˆ’å®Œæˆï¼Œå‡†å¤‡å®æ–½  
> **å½“å‰é¡¹ç›®ç‰ˆæœ¬**: v1.8.0

---

## ğŸ“‹ æ–‡æ¡£è¯´æ˜

æœ¬æ–‡æ¡£æ˜¯ MindVoice é¡¹ç›®çš„ä¼šå‘˜ä½“ç³»ä¸æ¶ˆè´¹è®¡é‡åŠŸèƒ½çš„å®Œæ•´è§„åˆ’ã€‚è¿™æ˜¯ä¸€ä¸ª**æ–°å¢åŠŸèƒ½æ¨¡å—**ï¼Œå°†åœ¨ç°æœ‰é¡¹ç›®åŸºç¡€ä¸Šæ‰©å±•å®ç°ã€‚

**ä¸ç°æœ‰ç³»ç»Ÿçš„å…³ç³»**:
- æ•°æ®åº“æ‰©å±•ï¼šåœ¨ç°æœ‰ SQLite æ•°æ®åº“åŸºç¡€ä¸Šæ–°å¢è¡¨ç»“æ„
- æ¶æ„å…¼å®¹ï¼šä¸ç°æœ‰ Electron + Python FastAPI æ¶æ„å®Œå…¨å…¼å®¹
- é…ç½®æ‰©å±•ï¼šåœ¨ `config.yml` ä¸­æ–°å¢ä¼šå‘˜ç›¸å…³é…ç½®
- å‘åå…¼å®¹ï¼šä¸å½±å“ç°æœ‰åŠŸèƒ½çš„æ­£å¸¸ä½¿ç”¨

## ğŸ¯ æ ¸å¿ƒè®¾è®¡ç†å¿µ

**åŠŸèƒ½å…¨éƒ¨å¼€æ”¾ï¼Œä»…é¢åº¦åŒºåˆ†ç­‰çº§**

æœ¬æ–¹æ¡ˆé‡‡ç”¨ç®€åŒ–è®¾è®¡ï¼Œ**æ‰€æœ‰åŠŸèƒ½æ¨¡å—å¯¹æ‰€æœ‰ç”¨æˆ·å®Œå…¨å¼€æ”¾**ï¼Œä¸åŒä¼šå‘˜ç­‰çº§ä»…åœ¨ä»¥ä¸‹æ–¹é¢æœ‰åŒºåˆ«ï¼š

1. **æœˆåº¦é¢åº¦**: ASRæ—¶é•¿å’ŒLLM tokensçš„ä½¿ç”¨é‡
2. **å®¢æœæ”¯æŒ**: å“åº”æ—¶é—´å’ŒæœåŠ¡çº§åˆ«

**ä¼˜åŠ¿**:
- âœ… é™ä½ç ”å‘éš¾åº¦ï¼ˆå‡å°‘çº¦30%å·¥ä½œé‡ï¼‰
- âœ… æå‡ç”¨æˆ·ä½“éªŒï¼ˆå¯ä½“éªŒå…¨éƒ¨åŠŸèƒ½ï¼‰
- âœ… å•†ä¸šé€»è¾‘æ¸…æ™°ï¼ˆç”¨å¾—å¤šå°±å‡çº§ï¼‰
- âœ… å¿«é€Ÿä¸Šçº¿ï¼ˆå…ˆç®€åç¹ï¼‰

---

## ç›®å½•

1. [æ¦‚è¿°](#ä¸€æ¦‚è¿°)
2. [æ¶æ„è®¾è®¡](#äºŒæ¶æ„è®¾è®¡)
3. [è®¾å¤‡è¯†åˆ«ä¸ç»‘å®š](#ä¸‰è®¾å¤‡è¯†åˆ«ä¸ç»‘å®š)
4. [ä¼šå‘˜ä½“ç³»](#å››ä¼šå‘˜ä½“ç³»)
5. [æ¶ˆè´¹è®¡é‡](#äº”æ¶ˆè´¹è®¡é‡)
6. [æ¿€æ´»ç ç³»ç»Ÿ](#å…­æ¿€æ´»ç ç³»ç»Ÿ)
7. [ç”¨æˆ·æ—…ç¨‹](#ä¸ƒç”¨æˆ·æ—…ç¨‹)
8. [UI/UXè®¾è®¡](#å…«uiuxè®¾è®¡)
9. [æ•°æ®åº“è®¾è®¡](#ä¹æ•°æ®åº“è®¾è®¡)
10. [APIæ¥å£](#åapiæ¥å£)
11. [å®‰å…¨æœºåˆ¶](#åä¸€å®‰å…¨æœºåˆ¶)
12. [è¿è¥æ”¯æŒ](#åäºŒè¿è¥æ”¯æŒ)
13. [æŠ€æœ¯å®æ–½](#åä¸‰æŠ€æœ¯å®æ–½)
14. [æµ‹è¯•è®¡åˆ’](#åå››æµ‹è¯•è®¡åˆ’)
15. [éƒ¨ç½²ä¸è¿ç»´](#åäº”éƒ¨ç½²ä¸è¿ç»´)
16. [åˆè§„æ€§](#åå…­åˆè§„æ€§)
17. [æœªæ¥æ‰©å±•](#åä¸ƒæœªæ¥æ‰©å±•)

---

## ä¸€ã€æ¦‚è¿°

### 1.1 èƒŒæ™¯

MindVoice æ˜¯ä¸€ä¸ªç»“åˆè¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰å’Œå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„æ™ºèƒ½æ¡Œé¢åŠ©æ‰‹ã€‚ä¸ºäº†å¯æŒç»­è¿è¥å¹¶æä¾›å·®å¼‚åŒ–æœåŠ¡ï¼Œéœ€è¦å»ºç«‹ä¼šå‘˜ä½“ç³»ä¸æ¶ˆè´¹è®¡é‡æœºåˆ¶ã€‚

**å½“å‰é¡¹ç›®çŠ¶æ€**:
- âœ… åŸºç¡€åŠŸèƒ½å·²å®ç°ï¼šè¯­éŸ³è¯†åˆ«ã€æ™ºèƒ½å¯¹è¯ã€å†å²è®°å½•
- âœ… æ•°æ®åº“å·²å»ºç«‹ï¼š`records` è¡¨ï¼ˆid, text, metadata, app_type, created_atï¼‰
- âœ… é…ç½®ç³»ç»Ÿå®Œå–„ï¼šASRã€LLMã€å­˜å‚¨é…ç½®å®Œæ•´
- ğŸ”² ä¼šå‘˜ä½“ç³»ï¼šå¾…å®ç°
- ğŸ”² æ¶ˆè´¹è®¡é‡ï¼šå¾…å®ç°
- ğŸ”² æ¿€æ´»ç ç³»ç»Ÿï¼šå¾…å®ç°

### 1.2 æ ¸å¿ƒç›®æ ‡

- **è®¾å¤‡ç»‘å®š**: ä¸€æœºä¸€ç ï¼Œé˜²æ­¢æ»¥ç”¨
- **æ¶ˆè´¹è®¡é‡**: ASRæ—¶é•¿ã€LLM tokensç²¾ç¡®ç»Ÿè®¡
- **åŒæ¨¡å‹æ”¯æŒ**: å‚å•†æ¨¡å‹è®¡è´¹ï¼Œç”¨æˆ·è‡ªå¤‡æ¨¡å‹ä¸è®¡è´¹
- **ä¼šå‘˜ç­‰çº§**: å¤šå±‚æ¬¡é¢åº¦æ»¡è¶³ä¸åŒéœ€æ±‚
- **åŠŸèƒ½å¼€æ”¾**: æ‰€æœ‰åŠŸèƒ½å…¨éƒ¨å¼€æ”¾ï¼Œé™ä½ç ”å‘éš¾åº¦
- **å…è´¹æ°¸ä¹…**: æ‰€æœ‰å®‰è£…å®¢æˆ·è‡ªåŠ¨è·å¾—FREEæ°¸ä¹…æƒé™
- **ç”¨æˆ·ä¿¡æ¯**: æ”¯æŒæ˜µç§°ã€é‚®ç®±ã€ç®€ä»‹ã€å¤´åƒç®¡ç†
- **æ¿€æ´»æµç¨‹**: ç®€å•ã€å®‰å…¨ã€å¯é 
- **ç”¨æˆ·ä½“éªŒ**: é€æ˜ã€å‹å¥½ã€æ— æ„ŸçŸ¥

### 1.3 è®¾è®¡åŸåˆ™

1. **æœ¬åœ°ä¼˜å…ˆ**: æ ¸å¿ƒæ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ï¼Œç¦»çº¿å¯ç”¨
2. **ç¨³å®šå¯é **: è®¾å¤‡IDåŸºäºç¡¬ä»¶ï¼Œé‡è£…ä¸ä¸¢å¤±
3. **é€æ˜è®¡é‡**: å®æ—¶æ˜¾ç¤ºæ¶ˆè´¹å’Œå‰©ä½™é¢åº¦
4. **çµæ´»è®¢é˜…**: 1ï½nä¸ªæœˆä»»æ„é€‰æ‹©ï¼ˆæ— ç»ˆèº«ä¼šå‘˜ï¼Œé¿å…æ¼æ´ï¼‰
5. **å®‰å…¨é˜²æŠ¤**: é˜²ä½œå¼Šã€é˜²æ»¥ç”¨ã€æ•°æ®åŠ å¯†
6. **åŠŸèƒ½å¼€æ”¾**: æ‰€æœ‰åŠŸèƒ½å…¨éƒ¨å¼€æ”¾ï¼Œä»…é¢åº¦åŒºåˆ†ç­‰çº§

---

## äºŒã€æ¶æ„è®¾è®¡

### 2.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Electron ä¸»è¿›ç¨‹                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ è®¾å¤‡è¯†åˆ«æ¨¡å—  â”‚  â”‚ ä¼šå‘˜ç®¡ç†æ¨¡å—  â”‚  â”‚ ç›‘æ§æ¨¡å—  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Python åç«¯æœåŠ¡                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ASRæ¶ˆè´¹ç»Ÿè®¡  â”‚  â”‚ LLMæ¶ˆè´¹ç»Ÿè®¡  â”‚  â”‚ æ•°æ®åº“    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æœ¬åœ°æ•°æ®å­˜å‚¨                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ SQLite æ•°æ®åº“â”‚  â”‚ JSON é…ç½®    â”‚  â”‚ æ—¥å¿—æ–‡ä»¶  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ•°æ®æµ

```
ç”¨æˆ·æ“ä½œ
    â†“
ASR/LLMæœåŠ¡è°ƒç”¨
    â†“
æ¶ˆè´¹è®¡é‡ï¼ˆå®æ—¶ç»Ÿè®¡ï¼‰
    â†“
é¢åº¦æ£€æŸ¥ï¼ˆå‰ç½®éªŒè¯ï¼‰
    â†“
å†™å…¥æ•°æ®åº“ï¼ˆæ¶ˆè´¹è®°å½•ï¼‰
    â†“
UIæ›´æ–°ï¼ˆæ˜¾ç¤ºå‰©ä½™é¢åº¦ï¼‰
```

### 2.3 å­˜å‚¨ä½ç½®

| æ•°æ®ç±»å‹ | å­˜å‚¨ä½ç½® | è¯´æ˜ |
|---------|---------|------|
| è®¾å¤‡ä¿¡æ¯ | `~/Library/Application Support/MindVoice/device.json` | ç¨³å®šä½ç½®ï¼Œé‡è£…ä¸åˆ  |
| ä¼šå‘˜ä¿¡æ¯ | `~/Library/Application Support/MindVoice/database/membership.db` | SQLiteï¼ˆæ–°å¢ï¼‰ |
| æ¶ˆè´¹è®°å½• | `~/Library/Application Support/MindVoice/database/consumption.db` | SQLiteï¼ˆæ–°å¢ï¼‰ |
| æ¿€æ´»ç é»‘åå• | `~/Library/Application Support/MindVoice/blacklist.json` | JSONï¼ˆæ–°å¢ï¼‰ |
| åº”ç”¨æ•°æ® | `~/Library/Application Support/MindVoice/database/history.db` | ç°æœ‰æ•°æ®åº“ |
| ç”¨æˆ·å¤´åƒ | `~/Library/Application Support/MindVoice/avatars/` | å¤´åƒå›¾ç‰‡æ–‡ä»¶ï¼ˆæ–°å¢ï¼‰ |

**æ³¨æ„**: Windows/Linux è·¯å¾„å‚è€ƒ `config.yml.example` ä¸­çš„è·¨å¹³å°é…ç½®ã€‚

---

## ä¸‰ã€è®¾å¤‡è¯†åˆ«ä¸ç»‘å®š

### 3.1 è®¾å¤‡IDç”Ÿæˆç­–ç•¥

#### 3.1.1 ç”ŸæˆåŸåˆ™

- **ç¨³å®šæ€§**: åŸºäºç¡¬ä»¶ä¿¡æ¯ï¼ŒåŒä¸€æœºå™¨å§‹ç»ˆç›¸åŒ
- **å”¯ä¸€æ€§**: ä¸åŒæœºå™¨ç”Ÿæˆä¸åŒID
- **å®‰å…¨æ€§**: æ— æ³•åå‘æ¨å¯¼ç¡¬ä»¶ä¿¡æ¯
- **è·¨å¹³å°**: æ”¯æŒ macOSã€Windowsã€Linux

#### 3.1.2 ç”Ÿæˆç®—æ³•

```typescript
function generateDeviceId(): string {
  // 1. è·å–æœºå™¨å”¯ä¸€æ ‡è¯†
  const machineId = getMachineId(); // å¹³å°ç›¸å…³
  
  // 2. SHA-256å“ˆå¸Œ + ç›å€¼
  const hash = sha256(machineId + 'MindVoice-Salt');
  
  // 3. è½¬æ¢ä¸ºUUIDæ ¼å¼
  return formatAsUUID(hash);
}
```

#### 3.1.3 å¹³å°å®ç°

| å¹³å° | æ ‡è¯†æ¥æº | è·å–æ–¹å¼ | é™çº§æ–¹æ¡ˆ |
|-----|---------|---------|---------|
| macOS | ç³»ç»Ÿåºåˆ—å· / Hardware UUID | `system_profiler` / `ioreg` | æœ¬åœ°ç”Ÿæˆå¹¶æŒä¹…åŒ– |
| Windows | æœºå™¨GUID | æ³¨å†Œè¡¨ / PowerShell | æœ¬åœ°ç”Ÿæˆå¹¶æŒä¹…åŒ– |
| Linux | `/etc/machine-id` | æ–‡ä»¶è¯»å– | æœ¬åœ°ç”Ÿæˆå¹¶æŒä¹…åŒ– |

**å®ç°ä½ç½®**: `electron-app/electron/main.ts` æˆ–æ–°å»º `electron-app/electron/device-id.ts`

### 3.2 è®¾å¤‡æ³¨å†Œæµç¨‹

```
é¦–æ¬¡å¯åŠ¨
    â†“
ç”Ÿæˆè®¾å¤‡ID (generateStableDeviceId)
    â†“
æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å­˜åœ¨
    â†“
ä¸å­˜åœ¨ â†’ æ³¨å†Œæ–°è®¾å¤‡ â†’ åˆå§‹åŒ–å…è´¹ä¼šå‘˜ï¼ˆæ°¸ä¹…æœ‰æ•ˆï¼‰
    â†“
å­˜åœ¨ â†’ æ¢å¤è®¾å¤‡ä¿¡æ¯ â†’ æ¢å¤ä¼šå‘˜ä¿¡æ¯ â†’ æ˜¾ç¤º"æ¬¢è¿å›æ¥"
```

**å®ç°ä½ç½®**: 
- Electronä¸»è¿›ç¨‹: `app.on('ready')` äº‹ä»¶
- Pythonåç«¯: `/api/device/register` æ¥å£

### 3.3 é‡è£…å¤„ç†

#### 3.3.1 æ£€æµ‹é€»è¾‘

```typescript
async function detectReinstall(): Promise<{
  isReinstall: boolean;
  existingDeviceId?: string;
  existingMembership?: MembershipInfo;
}> {
  const deviceId = await generateStableDeviceId();
  const exists = await checkDeviceExists(deviceId);
  
  if (exists) {
    const membership = await getMembership(deviceId);
    return {
      isReinstall: true,
      existingDeviceId: deviceId,
      existingMembership: membership
    };
  }
  
  return { isReinstall: false };
}
```

#### 3.3.2 æ¢å¤æµç¨‹

```
æ£€æµ‹åˆ°é‡è£…
    â†“
åŠ è½½è®¾å¤‡ä¿¡æ¯
    â†“
æ¢å¤ä¼šå‘˜ä¿¡æ¯
    â†“
æ¢å¤æ¶ˆè´¹è®°å½•
    â†“
æ˜¾ç¤ºæ¬¢è¿å¯¹è¯æ¡†ï¼ˆ"æ¬¢è¿å›æ¥ï¼Œæ‚¨çš„ä¼šå‘˜ä¿¡æ¯å·²æ¢å¤"ï¼‰
```

---

## å››ã€ä¼šå‘˜ä½“ç³»

### 4.1 ä¼šå‘˜ç­‰çº§å®šä¹‰

| ç­‰çº§ | ä»£ç  | åç§° | ASRé¢åº¦/æœˆ | LLMé¢åº¦/æœˆ | å®¢æœæ”¯æŒ |
|-----|------|------|-----------|-----------|---------|
| FREE | `free` | å…è´¹å°é²œ | 1å°æ—¶ | 10ä¸‡tokens | æ ‡å‡†æ”¯æŒï¼ˆ3å¤©ï¼‰ |
| VIP | `vip` | VIPä¼šå‘˜ | 10å°æ—¶ | 100ä¸‡tokens | ä¼˜å…ˆæ”¯æŒï¼ˆ24å°æ—¶ï¼‰ |
| PRO | `pro` | PROä¼šå‘˜ | 50å°æ—¶ | 500ä¸‡tokens | VIPæ”¯æŒï¼ˆ12å°æ—¶ï¼‰ |
| PRO+ | `pro_plus` | PRO+ä¼šå‘˜ | 200å°æ—¶ | 2000ä¸‡tokens | ä¸“å±æ”¯æŒï¼ˆ4å°æ—¶ï¼‰ |

### 4.2 ä¼šå‘˜æƒç›Š

**è®¾è®¡åŸåˆ™**: æ‰€æœ‰åŠŸèƒ½æ¨¡å—å…¨éƒ¨å¼€æ”¾ï¼Œä¸åŒç­‰çº§ä»…åœ¨é¢åº¦å’ŒæœåŠ¡æ”¯æŒä¸Šæœ‰å·®å¼‚ã€‚

#### 4.2.1 å…±äº«åŠŸèƒ½ï¼ˆæ‰€æœ‰ç­‰çº§ï¼‰

**æ‰€æœ‰ä¼šå‘˜ï¼ˆåŒ…æ‹¬å…è´¹ï¼‰å‡å¯ä½¿ç”¨ä»¥ä¸‹åŠŸèƒ½**:
- âœ… è¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰
- âœ… æ™ºèƒ½å¯¹è¯ï¼ˆLLMï¼‰
- âœ… çŸ¥è¯†åº“åŠŸèƒ½ï¼ˆæ— é™åˆ¶ï¼‰
- âœ… å†å²è®°å½•æŸ¥çœ‹
- âœ… æ‰¹é‡å¤„ç†
- âœ… æ‰€æœ‰å¯¼å‡ºåŠŸèƒ½ï¼ˆMarkdownã€Wordã€PDFç­‰ï¼‰
- âœ… æ‰€æœ‰åº”ç”¨æ¨¡å—ï¼ˆVoice Noteã€Voice Chatã€Voice Zenç­‰ï¼‰
- âœ… è‡ªå®šä¹‰æ¨¡å‹é€‰æ‹©
- âœ… æ•°æ®å¯¼å‡ºå·¥å…·

**å·®å¼‚ç‚¹**: ä»…åœ¨æœˆåº¦é¢åº¦å’Œå®¢æœæ”¯æŒä¸Šæœ‰åŒºåˆ«

#### 4.2.2 FREEï¼ˆå…è´¹å°é²œï¼‰

**æœˆåº¦é¢åº¦**:
- ASR: 1å°æ—¶ï¼ˆ3,600,000msï¼‰
- LLM: 10ä¸‡tokens

**å®¢æœæ”¯æŒ**:
- æ ‡å‡†æ”¯æŒï¼ˆé‚®ä»¶å“åº”ï¼Œ3ä¸ªå·¥ä½œæ—¥å†…ï¼‰

#### 4.2.3 VIPä¼šå‘˜

**æœˆåº¦é¢åº¦**:
- ASR: 10å°æ—¶ï¼ˆ36,000,000msï¼‰
- LLM: 100ä¸‡tokens

**å®¢æœæ”¯æŒ**:
- ä¼˜å…ˆæ”¯æŒï¼ˆé‚®ä»¶/å¾®ä¿¡å“åº”ï¼Œ24å°æ—¶å†…ï¼‰

#### 4.2.4 PROä¼šå‘˜

**æœˆåº¦é¢åº¦**:
- ASR: 50å°æ—¶ï¼ˆ180,000,000msï¼‰
- LLM: 500ä¸‡tokens

**å®¢æœæ”¯æŒ**:
- VIPæ”¯æŒï¼ˆé‚®ä»¶/å¾®ä¿¡/ç”µè¯ï¼Œ12å°æ—¶å†…ï¼‰

#### 4.2.5 PRO+ä¼šå‘˜

**æœˆåº¦é¢åº¦**:
- ASR: 200å°æ—¶ï¼ˆ720,000,000msï¼‰
- LLM: 2000ä¸‡tokens

**å®¢æœæ”¯æŒ**:
- ä¸“å±æ”¯æŒï¼ˆä¸“å±å®¢æœï¼Œ4å°æ—¶å†…å“åº”ï¼‰
- ä¸“å±å®¢æˆ·ç»ç†ï¼ˆå¯é€‰ï¼‰

### 4.3 è®¢é˜…å‘¨æœŸ

#### 4.3.1 æ”¯æŒçš„å‘¨æœŸ

- **1ä¸ªæœˆ**: çµæ´»è®¢é˜…
- **3ä¸ªæœˆ**: å­£åº¦è®¢é˜…ï¼ˆ9æŠ˜ä¼˜æƒ ï¼‰
- **6ä¸ªæœˆ**: åŠå¹´è®¢é˜…ï¼ˆ85æŠ˜ä¼˜æƒ ï¼‰
- **12ä¸ªæœˆ**: å¹´åº¦è®¢é˜…ï¼ˆ8æŠ˜ä¼˜æƒ ï¼‰

#### 4.3.2 å‘¨æœŸè§„åˆ™

- âœ… æœ€å°å‘¨æœŸï¼š1ä¸ªæœˆ
- âœ… æœ€å¤§å‘¨æœŸï¼š120ä¸ªæœˆï¼ˆ10å¹´ï¼‰
- âœ… è‡ªç”±é€‰æ‹©ï¼š1ï½120ä»»æ„æ•´æ•°
- âŒ æ— ç»ˆèº«ä¼šå‘˜ï¼ˆé¿å…æ¼æ´ï¼‰
- âœ… è¿‡æœŸå¤„ç†ï¼šè‡ªåŠ¨é™çº§åˆ°å…è´¹

### 4.4 ä¼šå‘˜çŠ¶æ€

| çŠ¶æ€ | ä»£ç  | è¯´æ˜ | å¤„ç† |
|-----|------|------|------|
| æœ‰æ•ˆ | `active` | ä¼šå‘˜åœ¨æœ‰æ•ˆæœŸå†… | æ­£å¸¸ä½¿ç”¨ |
| å·²è¿‡æœŸ | `expired` | ä¼šå‘˜å·²è¿‡æœŸ | é™çº§åˆ°å…è´¹ |
| å¾…æ¿€æ´» | `pending` | å·²è´­ä¹°æœªæ¿€æ´» | ç­‰å¾…æ¿€æ´»ç  |

**æ³¨æ„**: å…è´¹ä¼šå‘˜æ— è¿‡æœŸæ—¶é—´ï¼Œæ°¸ä¹…æœ‰æ•ˆã€‚

### 4.5 å…è´¹æ°¸ä¹…æƒé™

#### 4.5.1 æ–°ç”¨æˆ·æ³¨å†Œ

- **é»˜è®¤ç­‰çº§**: FREEï¼ˆå…è´¹å°é²œï¼‰
- **æƒé™æ—¶é•¿**: æ°¸ä¹…æœ‰æ•ˆ
- **åŠŸèƒ½æƒç›Š**: å®Œæ•´åŠŸèƒ½è®¿é—®ï¼ˆä»…é¢åº¦å—é™ï¼‰
- **é¢åº¦é™åˆ¶**: 1å°æ—¶ASR + 10ä¸‡tokens LLMï¼ˆæ¯æœˆé‡ç½®ï¼‰

#### 4.5.2 æ³¨å†Œæ¿€æ´»æµç¨‹

```
ç”¨æˆ·é¦–æ¬¡å¯åŠ¨
    â†“
ç”Ÿæˆè®¾å¤‡ID
    â†“
è‡ªåŠ¨æ³¨å†Œå…è´¹ä¼šå‘˜ï¼ˆæ°¸ä¹…æœ‰æ•ˆï¼‰
    â†“
æ˜¾ç¤ºæ¬¢è¿æç¤º: "æ¬¢è¿ä½¿ç”¨MindVoiceï¼å·²è‡ªåŠ¨å¼€é€šå…è´¹æ°¸ä¹…æƒé™"
```

**é‡è¦è¯´æ˜**: 
- âŒ ä¸å­˜åœ¨è¯•ç”¨æœºåˆ¶
- âœ… æ‰€æœ‰å®‰è£…çš„å®¢æˆ·éƒ½è‡ªåŠ¨è·å¾—FREEï¼ˆå…è´¹å°é²œï¼‰æ°¸ä¹…æƒé™
- âœ… å…è´¹ç”¨æˆ·å¯è®¿é—®æ‰€æœ‰åŠŸèƒ½ï¼Œä»…å—æœˆåº¦é¢åº¦é™åˆ¶
- âœ… å¯éšæ—¶é€šè¿‡æ¿€æ´»ç å‡çº§åˆ°æ›´é«˜ç­‰çº§

---

## äº”ã€æ¶ˆè´¹è®¡é‡

### 5.1 ASRæ¶ˆè´¹è®¡é‡

#### 5.1.1 è®¡é‡ä¾æ®

- **è®¡è´¹å•ä½**: æ¯«ç§’ï¼ˆmsï¼‰
- **è®¡é‡æ¥æº**: ASRå“åº”ä¸­çš„ `time_info`
- **è®¡ç®—æ–¹å¼**: `duration_ms = end_time - start_time`
- **è§¦å‘æ—¶æœº**: å½“ `is_definite_utterance=true` æ—¶è®°å½•

#### 5.1.2 ç»Ÿè®¡æ—¶æœº

```
ASRè¿”å›ç¡®å®šç»“æœï¼ˆis_definite_utterance=trueï¼‰
    â†“
æå– time_info (start_time, end_time)
    â†“
è®¡ç®—æ—¶é•¿ duration_ms
    â†“
è®°å½•æ¶ˆè´¹åˆ°æ•°æ®åº“
    â†“
æ›´æ–°æœˆåº¦æ±‡æ€»
```

**é›†æˆä½ç½®**: 
- `src/providers/asr/volcano.py` â†’ `_handle_recognition_result()` æ–¹æ³•
- æ–°å¢: `src/services/consumption_service.py`

#### 5.1.3 æ¶ˆè´¹è®°å½•ç»“æ„

```typescript
interface ASRConsumption {
  id: string;                 // UUID
  deviceId: string;           // è®¾å¤‡ID
  year: number;               // å¹´ä»½
  month: number;              // æœˆä»½
  duration_ms: number;        // æ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰
  start_time: number;         // å¼€å§‹æ—¶é—´ï¼ˆæ¯«ç§’æ—¶é—´æˆ³ï¼‰
  end_time: number;           // ç»“æŸæ—¶é—´ï¼ˆæ¯«ç§’æ—¶é—´æˆ³ï¼‰
  provider: 'volcano';        // ASRæä¾›å•†
  language: string;           // è¯­è¨€ï¼ˆzh-CN/en-USï¼‰
  session_id: string;         // ä¼šè¯ID
  timestamp: number;          // è®°å½•æ—¶é—´æˆ³
  created_at: string;         // åˆ›å»ºæ—¶é—´ï¼ˆISOæ ¼å¼ï¼‰
}
```

### 5.2 LLMæ¶ˆè´¹è®¡é‡

#### 5.2.1 è®¡é‡ä¾æ®

- **è®¡è´¹å•ä½**: tokens
- **è®¡é‡æ¥æº**: LiteLLMå“åº”çš„ `usage` å­—æ®µ
- **è®¡é‡å‰æ**: ä»…è®¡é‡ä½¿ç”¨å‚å•†æä¾›çš„æ¨¡å‹
- **ç»Ÿè®¡ç»´åº¦**: 
  - `prompt_tokens`: è¾“å…¥tokens
  - `completion_tokens`: è¾“å‡ºtokens
  - `total_tokens`: æ€»tokens

**é‡è¦è¯´æ˜**ï¼š
- âœ… **å‚å•†æä¾›çš„æ¨¡å‹**: ä½¿ç”¨ç³»ç»Ÿé…ç½®çš„API Keyï¼Œè®¡å…¥ä¼šå‘˜é¢åº¦
- âŒ **ç”¨æˆ·è‡ªå¤‡æ¨¡å‹**: ç”¨æˆ·è‡ªå·±é…ç½®çš„API Keyï¼ˆOpenAIã€Claudeç­‰ï¼‰ï¼Œ**ä¸è®¡å…¥ä¼šå‘˜é¢åº¦**ï¼Œå¯è‡ªç”±ä½¿ç”¨

#### 5.2.2 ç»Ÿè®¡æ—¶æœº

```
LLMè¿”å›å“åº”
    â†“
æ£€æŸ¥æ¨¡å‹ç±»å‹ï¼ˆå‚å•†æä¾› or ç”¨æˆ·è‡ªå¤‡ï¼‰
    â†“
å‚å•†æä¾›ï¼Ÿ
    â”œâ”€ æ˜¯ â†’ ä»å“åº”ä¸­æå– usage å¯¹è±¡
    â”‚       â†“
    â”‚       è®°å½• prompt_tokens å’Œ completion_tokens
    â”‚       â†“
    â”‚       è®°å½•æ¶ˆè´¹åˆ°æ•°æ®åº“
    â”‚       â†“
    â”‚       æ›´æ–°æœˆåº¦æ±‡æ€»
    â”‚
    â””â”€ å¦ â†’ è·³è¿‡è®¡é‡ï¼ˆç”¨æˆ·è‡ªå¤‡æ¨¡å‹ï¼‰
```

**é›†æˆä½ç½®**: 
- `src/providers/llm/litellm_provider.py` â†’ `chat()` æ–¹æ³•
- æ–°å¢: `src/services/consumption_service.py`

#### 5.2.3 æ¶ˆè´¹è®°å½•ç»“æ„

```typescript
interface LLMConsumption {
  id: string;                 // UUID
  deviceId: string;           // è®¾å¤‡ID
  year: number;               // å¹´ä»½
  month: number;              // æœˆä»½
  prompt_tokens: number;      // è¾“å…¥tokens
  completion_tokens: number;   // è¾“å‡ºtokens
  total_tokens: number;        // æ€»tokens
  model: string;              // æ¨¡å‹åç§°
  provider: string;           // LLMæä¾›å•†
  model_source: 'vendor' | 'user';  // æ¨¡å‹æ¥æºï¼švendor(å‚å•†) / user(ç”¨æˆ·è‡ªå¤‡)
  request_id: string;         // è¯·æ±‚ID
  timestamp: number;          // è®°å½•æ—¶é—´æˆ³
  created_at: string;         // åˆ›å»ºæ—¶é—´ï¼ˆISOæ ¼å¼ï¼‰
}
```

**æ³¨æ„**: ä»… `model_source === 'vendor'` çš„è®°å½•è®¡å…¥ä¼šå‘˜é¢åº¦ç»Ÿè®¡

### 5.3 é¢åº¦æ£€æŸ¥

#### 5.3.1 å‰ç½®æ£€æŸ¥

```typescript
// åœ¨è°ƒç”¨ASR/LLMå‰æ£€æŸ¥é¢åº¦
async function checkQuotaBeforeUse(
  type: 'asr' | 'llm',
  estimatedAmount: number,
  modelSource?: 'vendor' | 'user'  // LLMä¸“ç”¨ï¼šæ¨¡å‹æ¥æº
): Promise<{ allowed: boolean; reason?: string }> {
  
  // 1. ç”¨æˆ·è‡ªå¤‡æ¨¡å‹ä¸æ£€æŸ¥é¢åº¦
  if (type === 'llm' && modelSource === 'user') {
    return { allowed: true };  // ç”¨æˆ·è‡ªå¤‡æ¨¡å‹ï¼Œç›´æ¥æ”¾è¡Œ
  }
  
  const quota = await getQuotaStatus();
  
  // 2. æ£€æŸ¥ä¼šå‘˜æ˜¯å¦æœ‰æ•ˆ
  if (!quota.isActive) {
    return { allowed: false, reason: 'ä¼šå‘˜å·²è¿‡æœŸï¼Œè¯·ç»­è´¹' };
  }
  
  // 3. æ£€æŸ¥é¢åº¦æ˜¯å¦è¶³å¤Ÿ
  if (type === 'asr' && quota.asr.remaining < estimatedAmount) {
    return { allowed: false, reason: 'ASRé¢åº¦ä¸è¶³' };
  }
  
  if (type === 'llm' && quota.llm.remaining < estimatedAmount) {
    return { allowed: false, reason: 'LLMé¢åº¦ä¸è¶³' };
  }
  
  return { allowed: true };
}
```

**æ¨¡å‹æ¥æºåˆ¤æ–­**ï¼š
- å‚å•†æ¨¡å‹ (`vendor`): éœ€è¦æ£€æŸ¥é¢åº¦ï¼Œè®¡å…¥æ¶ˆè´¹ç»Ÿè®¡
- ç”¨æˆ·è‡ªå¤‡æ¨¡å‹ (`user`): è·³è¿‡é¢åº¦æ£€æŸ¥ï¼Œä¸è®¡å…¥ç»Ÿè®¡

**å®ç°ä½ç½®**: 
- Pythonåç«¯: `/api/quota/check` æ¥å£
- é›†æˆåˆ°: `src/services/voice_service.py` å’Œ `src/services/llm_service.py`

#### 5.3.2 è¶…é™å¤„ç†

| åœºæ™¯ | å¤„ç†æ–¹å¼ | UIæç¤º |
|-----|---------|--------|
| ASRé¢åº¦ä¸è¶³ | é˜»æ­¢å½•éŸ³ | "æœ¬æœˆASRé¢åº¦å·²ç”¨å®Œï¼Œè¯·å‡çº§æˆ–ç­‰å¾…ä¸‹æœˆé‡ç½®" |
| LLMé¢åº¦ä¸è¶³ï¼ˆå‚å•†æ¨¡å‹ï¼‰ | æç¤ºåˆ‡æ¢ | "æœ¬æœˆLLMé¢åº¦å·²ç”¨å®Œï¼Œè¯·å‡çº§ã€ç­‰å¾…ä¸‹æœˆé‡ç½®ï¼Œæˆ–åˆ‡æ¢åˆ°ç”¨æˆ·è‡ªå¤‡æ¨¡å‹" |
| LLMé¢åº¦ä¸è¶³ï¼ˆç”¨æˆ·è‡ªå¤‡ï¼‰ | ä¸é™åˆ¶ | æ— æç¤ºï¼Œå¯æ­£å¸¸ä½¿ç”¨ |
| ä¼šå‘˜è¿‡æœŸ | é™çº§åˆ°å…è´¹ | "ä¼šå‘˜å·²è¿‡æœŸï¼Œå·²é™çº§åˆ°å…è´¹ç‰ˆï¼Œè¯·ç»­è´¹" |

### 5.4 æœˆåº¦é‡ç½®

#### 5.4.1 é‡ç½®æ—¶æœº

- **æ—¶é—´**: æ¯æœˆ1æ—¥ 00:00:00ï¼ˆæœ¬åœ°æ—¶é—´ï¼‰
- **è§¦å‘æ–¹å¼**: 
  - åº”ç”¨å¯åŠ¨æ—¶æ£€æŸ¥
  - å®šæ—¶ä»»åŠ¡ï¼ˆæ¯å°æ—¶æ£€æŸ¥ä¸€æ¬¡ï¼‰

#### 5.4.2 é‡ç½®æµç¨‹

```
æ£€æµ‹åˆ°æ–°æœˆä»½
    â†“
å½’æ¡£å½“æœˆæ¶ˆè´¹åˆ°å†å²è¡¨
    â†“
åˆ›å»ºæ–°çš„æœˆåº¦æ¶ˆè´¹è®°å½•ï¼ˆåˆå§‹å€¼ä¸º0ï¼‰
    â†“
é‡ç½®è®¡æ•°å™¨
    â†“
ï¼ˆå¯é€‰ï¼‰é€šçŸ¥ç”¨æˆ·"é¢åº¦å·²é‡ç½®"
```

**å®ç°ä½ç½®**: 
- Pythonåç«¯: `src/services/consumption_service.py` â†’ `reset_monthly_quota()`
- å®šæ—¶ä»»åŠ¡: ä½¿ç”¨ APScheduler

---

## å…­ã€æ¿€æ´»ç ç³»ç»Ÿ

### 6.1 æ¿€æ´»ç æ ¼å¼

#### 6.1.1 æ ¼å¼å®šä¹‰

```
æ ¼å¼: TIER-MONTHS-XXXX-XXXX
ç¤ºä¾‹: VIP-3-A1B2-C3D4

ç»„æˆ:
- TIER: ä¼šå‘˜ç­‰çº§ï¼ˆFREE/VIP/PRO/PROPLUSï¼‰
- MONTHS: è®¢é˜…æœˆæ•°ï¼ˆ1ï½120ï¼‰
- XXXX-XXXX: 8ä½æ ¡éªŒç ï¼ˆéšæœºç”Ÿæˆï¼Œå¤§å†™å­—æ¯+æ•°å­—ï¼‰
```

#### 6.1.2 ç”Ÿæˆè§„åˆ™

```typescript
function generateActivationCode(
  tier: MembershipTier,
  months: number
): string {
  // 1. ä¼šå‘˜ç­‰çº§ä»£ç 
  const tierCode = tier.toUpperCase().replace('_', '');
  
  // 2. ç”Ÿæˆ8ä½éšæœºæ ¡éªŒç ï¼ˆA-Z, 0-9ï¼‰
  const checksum = generateRandomCode(8);
  
  // 3. ç»„è£…æ¿€æ´»ç 
  return `${tierCode}-${months}-${checksum.substring(0,4)}-${checksum.substring(4,8)}`;
}

// ç¤ºä¾‹è¾“å‡º:
// VIP-1-A1B2-C3D4
// PRO-3-X7Y8-Z9K2
// PROPLUS-12-M5N6-P7Q8
```

### 6.2 æ¿€æ´»ç éªŒè¯

#### 6.2.1 éªŒè¯æµç¨‹

```
ç”¨æˆ·è¾“å…¥æ¿€æ´»ç 
    â†“
æ ¼å¼éªŒè¯ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰
    â†“
è§£æç­‰çº§å’Œæœˆæ•°
    â†“
éªŒè¯ç­‰çº§æœ‰æ•ˆæ€§
    â†“
éªŒè¯æœˆæ•°èŒƒå›´ï¼ˆ1ï½120ï¼‰
    â†“
æ£€æŸ¥æœ¬åœ°é»‘åå•ï¼ˆæ˜¯å¦å·²ä½¿ç”¨ï¼‰
    â†“
ï¼ˆå¯é€‰ï¼‰äº‘ç«¯éªŒè¯
    â†“
è¿”å›éªŒè¯ç»“æœ
```

#### 6.2.2 éªŒè¯è§„åˆ™

```typescript
async function validateActivationCode(code: string): Promise<{
  valid: boolean;
  tier?: MembershipTier;
  months?: number;
  error?: string;
}> {
  // 1. æ ¼å¼éªŒè¯
  const pattern = /^([A-Z]+)-(\d+)-([A-Z0-9]{4})-([A-Z0-9]{4})$/;
  if (!pattern.test(code)) {
    return { valid: false, error: 'æ¿€æ´»ç æ ¼å¼ä¸æ­£ç¡®' };
  }
  
  // 2. è§£æå†…å®¹
  const [, tierCode, monthsStr] = code.match(pattern)!;
  const tier = parseTier(tierCode); // VIP -> vip, PROPLUS -> pro_plus
  const months = parseInt(monthsStr);
  
  // 3. éªŒè¯æœ‰æ•ˆæ€§
  if (!tier) {
    return { valid: false, error: 'æ— æ•ˆçš„ä¼šå‘˜ç­‰çº§' };
  }
  
  if (months < 1 || months > 120) {
    return { valid: false, error: 'æ— æ•ˆçš„è®¢é˜…å‘¨æœŸ' };
  }
  
  // 4. æ£€æŸ¥æ˜¯å¦å·²ä½¿ç”¨
  if (await isCodeUsed(code)) {
    return { valid: false, error: 'æ¿€æ´»ç å·²è¢«ä½¿ç”¨æˆ–å·²å¤±æ•ˆ' };
  }
  
  return { valid: true, tier, months };
}
```

### 6.3 æ¿€æ´»ç ç®¡ç†

#### 6.3.1 ç”Ÿæˆå·¥å…·ï¼ˆå®¢æœåå°ï¼‰

**åŠŸèƒ½éœ€æ±‚**:
- æ‰¹é‡ç”ŸæˆåŠŸèƒ½ï¼ˆä¸€æ¬¡ç”Ÿæˆ1ï½1000ä¸ªï¼‰
- æŒ‡å®šç­‰çº§å’Œæœˆæ•°
- è®¾ç½®æœ‰æ•ˆæœŸï¼ˆå¯é€‰ï¼‰
- é™åˆ¶ä½¿ç”¨æ¬¡æ•°ï¼ˆé»˜è®¤1æ¬¡ï¼‰
- å¯¼å‡ºä¸ºCSV/Excel

**å®ç°æ–¹å¼**:
- ç‹¬ç«‹çš„ç®¡ç†å·¥å…·ï¼ˆPythonè„šæœ¬æˆ–Webç•Œé¢ï¼‰
- ä½ç½®: `scripts/generate_activation_codes.py`

#### 6.3.2 ä½¿ç”¨è®°å½•ï¼ˆæœ¬åœ°ï¼‰

æœ¬åœ°é»‘åå•æ–‡ä»¶: `~/Library/Application Support/MindVoice/blacklist.json`

```json
{
  "codes": [
    "VIP-3-A1B2-C3D4",
    "PRO-6-X7Y8-Z9K2"
  ],
  "updated_at": 1704441600000
}
```

#### 6.3.3 äº‘ç«¯æœåŠ¡ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦äº‘ç«¯éªŒè¯ï¼Œå¯ä»¥å»ºç«‹ï¼š
- æ¿€æ´»ç æ•°æ®åº“ï¼ˆè®°å½•ç”Ÿæˆå’Œä½¿ç”¨ï¼‰
- éªŒè¯APIï¼ˆ`POST /api/activation/verify`ï¼‰
- é»‘åå•åŒæ­¥ï¼ˆå®šæœŸä¸‹è½½ï¼‰

**å½“å‰è§„åˆ’**: ç¬¬ä¸€é˜¶æ®µä»…æœ¬åœ°éªŒè¯ï¼Œäº‘ç«¯æœåŠ¡ä½œä¸º Phase 2 æ‰©å±•ã€‚

---

## ä¸ƒã€ç”¨æˆ·æ—…ç¨‹

### 7.1 å®Œæ•´æµç¨‹å›¾

```
ä¸‹è½½å®‰è£…
    â†“
é¦–æ¬¡å¯åŠ¨ â†’ ç”Ÿæˆè®¾å¤‡ID â†’ æ³¨å†Œå…è´¹ä¼šå‘˜ï¼ˆæ°¸ä¹…æœ‰æ•ˆï¼‰
    â†“
ä½¿ç”¨å…è´¹é¢åº¦ä½“éªŒ
    â†“
é¢åº¦ä¸è¶³æç¤ºï¼ˆå¦‚éœ€æ›´å¤šé¢åº¦ï¼‰
    â†“
è”ç³»å®¢æœ â†’ è·å–æ¿€æ´»ç 
    â†“
è¾“å…¥æ¿€æ´»ç  â†’ éªŒè¯æˆåŠŸ â†’ æ¿€æ´»ä¼šå‘˜
    â†“
æŒç»­ä½¿ç”¨ â†’ å®æ—¶æ˜¾ç¤ºæ¶ˆè´¹å’Œå‰©ä½™å¤©æ•°
    â†“
åˆ°æœŸå‰7/3/1å¤©æé†’
    â†“
åˆ°æœŸ â†’ è‡ªåŠ¨é™çº§åˆ°å…è´¹ â†’ æç¤ºç»­è´¹
    â†“
ç»­è´¹ â†’ åœ¨åŸæœ‰åŸºç¡€ä¸Šå»¶é•¿
```

### 7.2 å…³é”®èŠ‚ç‚¹

#### 7.2.1 é¦–æ¬¡å®‰è£…

```
å¯åŠ¨åº”ç”¨
    â†“
æ˜¾ç¤ºæ¬¢è¿ç•Œé¢ï¼ˆå¯é€‰ï¼‰
    â†“
è¯´æ˜ï¼šå·²è‡ªåŠ¨å¼€é€šå…è´¹æ°¸ä¹…æƒé™
    â†“
å¼•å¯¼å®ŒæˆåŸºç¡€è®¾ç½®
    â†“
å¼€å§‹ä½¿ç”¨
```

**UIå±•ç¤º**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¬¢è¿ä½¿ç”¨ MindVoiceï¼            â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                 â”‚
â”‚  âœ… å·²è‡ªåŠ¨å¼€é€šå…è´¹æ°¸ä¹…æƒé™         â”‚
â”‚                                 â”‚
â”‚  æ‚¨å¯ä»¥ç«‹å³äº«æœ‰ï¼š                 â”‚
â”‚  âœ“ æ‰€æœ‰åŠŸèƒ½å®Œå…¨å¼€æ”¾              â”‚
â”‚  âœ“ æ¯æœˆ1å°æ—¶è¯­éŸ³è¯†åˆ«             â”‚
â”‚  âœ“ æ¯æœˆ10ä¸‡tokenså¯¹è¯            â”‚
â”‚  âœ“ çŸ¥è¯†åº“åŠŸèƒ½                    â”‚
â”‚  âœ“ æ ‡å‡†å®¢æœæ”¯æŒ                  â”‚
â”‚                                 â”‚
â”‚  éœ€è¦æ›´å¤šé¢åº¦ï¼Ÿè”ç³»å®¢æœè·å–æ¿€æ´»ç   â”‚
â”‚                                 â”‚
â”‚  [å¼€å§‹ä½¿ç”¨]                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 7.2.2 é¢åº¦ä¸è¶³

```
å°è¯•ä½¿ç”¨åŠŸèƒ½
    â†“
æ£€æµ‹é¢åº¦ä¸è¶³
    â†“
é˜»æ­¢æ“ä½œ + æ˜¾ç¤ºæç¤º
    â†“
"æœ¬æœˆé¢åº¦å·²ç”¨å®Œï¼Œè¯·å‡çº§æˆ–ç­‰å¾…ä¸‹æœˆé‡ç½®"
    â†“
æŒ‰é’®ï¼š[è”ç³»å®¢æœ] [æŸ¥çœ‹è¯¦æƒ…] [å–æ¶ˆ]
```

#### 7.2.3 ä¼šå‘˜æ¿€æ´»

```
ç”¨æˆ·ç‚¹å‡»"æ¿€æ´»ä¼šå‘˜"
    â†“
æ˜¾ç¤ºæ¿€æ´»ç•Œé¢
    â†“
è¾“å…¥æ¿€æ´»ç : VIP-3-XXXX-XXXX
    â†“
ç‚¹å‡»"æ¿€æ´»"æŒ‰é’®
    â†“
éªŒè¯ä¸­...
    â†“
æˆåŠŸ â†’ "âœ… æ¿€æ´»æˆåŠŸï¼VIPä¼šå‘˜ï¼Œæœ‰æ•ˆæœŸ3ä¸ªæœˆ"
å¤±è´¥ â†’ "âŒ æ¿€æ´»å¤±è´¥ï¼šæ¿€æ´»ç æ— æ•ˆ"
```

#### 7.2.4 åˆ°æœŸæé†’

```
è·ç¦»è¿‡æœŸ7å¤©
    â†“
æ˜¾ç¤ºæé†’é€šçŸ¥ï¼ˆéä¾µå…¥å¼ï¼‰
    â†“
"âš  æ‚¨çš„ä¼šå‘˜è¿˜æœ‰7å¤©è¿‡æœŸï¼Œè¯·åŠæ—¶ç»­è´¹"
    â†“
è·ç¦»è¿‡æœŸ3å¤© â†’ å†æ¬¡æé†’
    â†“
è·ç¦»è¿‡æœŸ1å¤© â†’ æœ€åæé†’
```

---

## å…«ã€UI/UXè®¾è®¡

### 8.1 ä¼šå‘˜ä¿¡æ¯ç•Œé¢

#### 8.1.1 å¸ƒå±€è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VIPä¼šå‘˜                    [ç»­è´¹] â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                    â”‚
â”‚  çŠ¶æ€ï¼šâœ“ æœ‰æ•ˆ                      â”‚
â”‚  å‰©ä½™ï¼š25å¤©                        â”‚
â”‚  åˆ°æœŸæ—¶é—´ï¼š2026-02-05              â”‚
â”‚                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                    â”‚
â”‚  æœ¬æœˆé¢åº¦ä½¿ç”¨æƒ…å†µ                   â”‚
â”‚                                    â”‚
â”‚  ASRè¯­éŸ³è¯†åˆ«              80%      â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘              â”‚
â”‚  å·²ç”¨ï¼š8å°æ—¶ | å‰©ä½™ï¼š2å°æ—¶          â”‚
â”‚                                    â”‚
â”‚  LLMå¯¹è¯                  50%      â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘              â”‚
â”‚  å·²ç”¨ï¼š50ä¸‡ | å‰©ä½™ï¼š50ä¸‡            â”‚
â”‚  æ¨¡å‹ï¼š[å‚å•†æä¾› â–¼]                â”‚
â”‚                                    â”‚
â”‚  ä¸‹æ¬¡é‡ç½®ï¼š2026-02-01              â”‚
â”‚                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                    â”‚
â”‚  ä¼šå‘˜æƒç›Š                          â”‚
â”‚  âœ“ æ‰€æœ‰åŠŸèƒ½å®Œå…¨å¼€æ”¾                â”‚
â”‚  âœ“ æœˆåº¦é¢åº¦ï¼š10å°æ—¶ + 100ä¸‡tokens â”‚
â”‚  âœ“ ä¼˜å…ˆå®¢æœæ”¯æŒï¼ˆ24å°æ—¶å“åº”ï¼‰      â”‚
â”‚                                    â”‚
â”‚  ğŸ’¡ æç¤ºï¼šä½¿ç”¨ç”¨æˆ·è‡ªå¤‡æ¨¡å‹ä¸æ¶ˆè€—é¢åº¦ â”‚
â”‚                                    â”‚
â”‚  [æ¿€æ´»/ç»­è´¹] [æ¶ˆè´¹å†å²] [è”ç³»å®¢æœ] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ¨¡å‹é€‰æ‹©ä¸‹æ‹‰æ¡†**ï¼š
- **å‚å•†æä¾›**: ä½¿ç”¨ç³»ç»Ÿé…ç½®çš„æ¨¡å‹ï¼Œæ¶ˆè€—ä¼šå‘˜é¢åº¦
- **ç”¨æˆ·è‡ªå¤‡**: ä½¿ç”¨è‡ªå·±é…ç½®çš„API Keyï¼Œä¸æ¶ˆè€—é¢åº¦

**å®ç°ä½ç½®**: 
- æ–°å»ºç»„ä»¶: `electron-app/src/components/apps/Membership/MembershipView.tsx`
- æ ·å¼æ–‡ä»¶: `electron-app/src/components/apps/Membership/MembershipView.css`

#### 8.1.2 çŠ¶æ€æŒ‡ç¤º

| çŠ¶æ€ | é¢œè‰² | å›¾æ ‡ | è¯´æ˜ |
|-----|------|------|------|
| æœ‰æ•ˆ | ç»¿è‰² (#4CAF50) | âœ“ | ä¼šå‘˜åœ¨æœ‰æ•ˆæœŸå†… |
| å³å°†è¿‡æœŸ | æ©™è‰² (#FF9800) | âš  | å‰©ä½™7å¤©ä»¥å†… |
| å·²è¿‡æœŸ | çº¢è‰² (#F44336) | âœ— | éœ€è¦ç»­è´¹ |
| å…è´¹ä¼šå‘˜ | è“è‰² (#2196F3) | ğŸ‘¤ | æ°¸ä¹…æœ‰æ•ˆ |

#### 8.1.3 æ¨¡å‹é…ç½®ç•Œé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LLM æ¨¡å‹é…ç½®                       â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                    â”‚
â”‚  æ¨¡å‹æ¥æº                           â”‚
â”‚  â—‹ å‚å•†æä¾›ï¼ˆæ¨èï¼‰                 â”‚
â”‚     ä½¿ç”¨ç³»ç»Ÿé…ç½®çš„æ¨¡å‹              â”‚
â”‚     æ¶ˆè€—ä¼šå‘˜é¢åº¦                    â”‚
â”‚                                    â”‚
â”‚  â— ç”¨æˆ·è‡ªå¤‡                        â”‚
â”‚     ä½¿ç”¨è‡ªå·±çš„API Key               â”‚
â”‚     ä¸æ¶ˆè€—ä¼šå‘˜é¢åº¦                  â”‚
â”‚                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                    â”‚
â”‚  API é…ç½®ï¼ˆç”¨æˆ·è‡ªå¤‡ï¼‰               â”‚
â”‚                                    â”‚
â”‚  æä¾›å•†                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ OpenAI              â–¼        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚
â”‚  API Key                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ sk-...                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚
â”‚  æ¨¡å‹åç§°                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ gpt-4                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚
â”‚  Base URLï¼ˆå¯é€‰ï¼‰                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ https://api.openai.com       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚
â”‚  [æµ‹è¯•è¿æ¥] [ä¿å­˜]                  â”‚
â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®ç°ä½ç½®**: 
- æ–°å»ºç»„ä»¶: `electron-app/src/components/apps/Membership/ModelConfigView.tsx`
- é›†æˆåˆ°: è®¾ç½®é¡µé¢æˆ–ä¼šå‘˜ä¿¡æ¯é¡µé¢

**åŠŸèƒ½è¯´æ˜**:
- âœ… æ”¯æŒåˆ‡æ¢å‚å•†æ¨¡å‹å’Œç”¨æˆ·è‡ªå¤‡æ¨¡å‹
- âœ… ç”¨æˆ·è‡ªå¤‡æ¨¡å‹é…ç½®å­˜å‚¨åœ¨æœ¬åœ°åŠ å¯†
- âœ… æµ‹è¯•è¿æ¥åŠŸèƒ½éªŒè¯API Keyæœ‰æ•ˆæ€§
- âœ… æ”¯æŒå¤šä¸ªä¸»æµLLMæä¾›å•†ï¼ˆOpenAIã€Anthropicã€DeepSeekç­‰ï¼‰

### 8.2 æ¿€æ´»ç•Œé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¿€æ´»ä¼šå‘˜                           â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                    â”‚
â”‚  å½“å‰çŠ¶æ€                           â”‚
â”‚  ç­‰çº§ï¼šå…è´¹å°é²œ                     â”‚
â”‚  å‰©ä½™å¤©æ•°ï¼š15å¤©                     â”‚
â”‚  åˆ°æœŸæ—¶é—´ï¼š2026-01-20               â”‚
â”‚                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                    â”‚
â”‚  æ¿€æ´»ç                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ VIP-3-XXXX-XXXX              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           [æ¿€æ´»]                   â”‚
â”‚                                    â”‚
â”‚  æç¤ºï¼šæ¿€æ´»ç æ ¼å¼ä¸º                 â”‚
â”‚  TIER-MONTHS-XXXX-XXXX             â”‚
â”‚  ç¤ºä¾‹ï¼šVIP-3-A1B2-C3D4             â”‚
â”‚                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                    â”‚
â”‚  æ²¡æœ‰æ¿€æ´»ç ï¼Ÿ                       â”‚
â”‚  [è”ç³»å®¢æœè·å–æ¿€æ´»ç ]               â”‚
â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®ç°ä½ç½®**: 
- æ–°å»ºç»„ä»¶: `electron-app/src/components/apps/Membership/ActivationView.tsx`

### 8.3 æ¶ˆè´¹å†å²ç•Œé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¶ˆè´¹å†å²                           â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                    â”‚
â”‚  [2026å¹´1æœˆ] [2025å¹´12æœˆ] [æ›´å¤š]   â”‚
â”‚                                    â”‚
â”‚  2026å¹´1æœˆç»Ÿè®¡                     â”‚
â”‚  ASR: 8å°æ—¶ (28,800,000ms)        â”‚
â”‚  LLM: 50ä¸‡tokens                   â”‚
â”‚  è®°å½•æ•°: 156æ¡                      â”‚
â”‚                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                    â”‚
â”‚  è¯¦ç»†è®°å½•                           â”‚
â”‚                                    â”‚
â”‚  2026-01-05 14:30                  â”‚
â”‚  ASR | 15åˆ†é’Ÿ | ä¼šè®®å½•éŸ³            â”‚
â”‚                                    â”‚
â”‚  2026-01-05 10:20                  â”‚
â”‚  LLM | 5000 tokens | æ™ºèƒ½å¯¹è¯      â”‚
â”‚                                    â”‚
â”‚  2026-01-04 16:45                  â”‚
â”‚  ASR | 30åˆ†é’Ÿ | è®²åº§è®°å½•            â”‚
â”‚                                    â”‚
â”‚  [åŠ è½½æ›´å¤š]                         â”‚
â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®ç°ä½ç½®**: 
- æ–°å»ºç»„ä»¶: `electron-app/src/components/apps/Membership/ConsumptionHistoryView.tsx`

### 8.4 ç”¨æˆ·ä¿¡æ¯ç•Œé¢

#### 8.4.1 ç”¨æˆ·ä¿¡æ¯å±•ç¤ºä¸ç¼–è¾‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·ä¿¡æ¯                           â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”                            â”‚
â”‚  â”‚å¤´åƒâ”‚  å¼ ä¸‰                       â”‚
â”‚  â””â”€â”€â”€â”€â”˜                            â”‚
â”‚         [æ›´æ¢å¤´åƒ]                  â”‚
â”‚                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                    â”‚
â”‚  æ˜µç§°                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ å¼ ä¸‰                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚
â”‚  é‚®ç®±åœ°å€                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ zhangsan@example.com         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚
â”‚  ä¸ªäººç®€ä»‹                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ çƒ­çˆ±ç§‘æŠ€çš„äº§å“ç»ç†            â”‚ â”‚
â”‚  â”‚                              â”‚ â”‚
â”‚  â”‚                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚
â”‚  [ä¿å­˜] [å–æ¶ˆ]                      â”‚
â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®ç°ä½ç½®**: 
- æ–°å»ºç»„ä»¶: `electron-app/src/components/apps/Membership/UserProfileView.tsx`
- æ ·å¼æ–‡ä»¶: `electron-app/src/components/apps/Membership/UserProfileView.css`

**åŠŸèƒ½è¯´æ˜**:
- âœ… ç‚¹å‡»å¤´åƒæˆ–"æ›´æ¢å¤´åƒ"æŒ‰é’®ä¸Šä¼ æ–°å¤´åƒ
- âœ… æ”¯æŒæ‹–æ‹½ä¸Šä¼ å¤´åƒ
- âœ… å¤´åƒé¢„è§ˆå’Œè£å‰ªåŠŸèƒ½
- âœ… å®æ—¶ä¿å­˜ï¼ˆè‡ªåŠ¨ä¿å­˜æˆ–ç‚¹å‡»ä¿å­˜æŒ‰é’®ï¼‰
- âœ… è¡¨å•éªŒè¯ï¼ˆé‚®ç®±æ ¼å¼ã€æ˜µç§°é•¿åº¦ç­‰ï¼‰

**å­—æ®µé™åˆ¶**:
- æ˜µç§°: 1-50å­—ç¬¦
- é‚®ç®±: æ ‡å‡†é‚®ç®±æ ¼å¼éªŒè¯
- ä¸ªäººç®€ä»‹: 0-500å­—ç¬¦
- å¤´åƒ: PNG/JPG/JPEGï¼Œæœ€å¤§ 5MB

#### 8.4.2 ç”¨æˆ·ä¿¡æ¯åœ¨ä¼šå‘˜ç•Œé¢ä¸­çš„å±•ç¤º

åœ¨ä¼šå‘˜ä¿¡æ¯ç•Œé¢é¡¶éƒ¨æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯å¡ç‰‡ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”  å¼ ä¸‰                       â”‚
â”‚  â”‚å¤´åƒâ”‚  zhangsan@example.com       â”‚
â”‚  â””â”€â”€â”€â”€â”˜  [ç¼–è¾‘èµ„æ–™]                 â”‚
â”‚                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                    â”‚
â”‚  VIPä¼šå‘˜                    [ç»­è´¹] â”‚
â”‚  ï¼ˆä¸‹é¢æ˜¯ä¼šå‘˜ä¿¡æ¯...ï¼‰              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.5 å®æ—¶æç¤º

#### 8.5.1 éä¾µå…¥å¼æç¤ºï¼ˆä¸»ç•Œé¢è§’æ ‡ï¼‰

```
â”Œâ”€ ä¸»ç•Œé¢å³ä¸‹è§’ â”€â”
â”‚  ASR: 80% âš    â”‚
â”‚  LLM: 50%     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®ç°ä½ç½®**: 
- æ–°å»ºç»„ä»¶: `electron-app/src/components/shared/QuotaIndicator.tsx`
- é›†æˆåˆ°: `electron-app/src/App.tsx`

#### 8.5.2 ä¾µå…¥å¼å¯¹è¯æ¡†ï¼ˆè¶…é™æ—¶ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš  é¢åº¦ä¸è¶³                          â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                     â”‚
â”‚  æ‚¨æœ¬æœˆçš„ASRé¢åº¦å·²ç”¨å®Œã€‚             â”‚
â”‚                                     â”‚
â”‚  å½“å‰é¢åº¦ï¼š1å°æ—¶                     â”‚
â”‚  å·²ä½¿ç”¨ï¼š1å°æ—¶                       â”‚
â”‚  å‰©ä½™ï¼š0å°æ—¶                         â”‚
â”‚                                     â”‚
â”‚  è¯·å‡çº§ä¼šå‘˜æˆ–ç­‰å¾…ä¸‹æœˆé‡ç½®ã€‚          â”‚
â”‚  ä¸‹æ¬¡é‡ç½®ï¼š2026-02-01                â”‚
â”‚                                     â”‚
â”‚  [è”ç³»å®¢æœ] [æŸ¥çœ‹è¯¦æƒ…] [çŸ¥é“äº†]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®ç°æ–¹å¼**: Electronçš„ `dialog.showMessageBox()`

---

## ä¹ã€æ•°æ®åº“è®¾è®¡

### 9.1 ç°æœ‰æ•°æ®åº“ç»“æ„

**å½“å‰æ•°æ®åº“**: `~/Library/Application Support/MindVoice/database/history.db`

```sql
-- ç°æœ‰è¡¨ç»“æ„ï¼ˆä¸å˜ï¼‰
CREATE TABLE IF NOT EXISTS records (
  id TEXT PRIMARY KEY,
  text TEXT NOT NULL,
  metadata TEXT,
  app_type TEXT NOT NULL DEFAULT 'voice-note',
  created_at TIMESTAMP NOT NULL
);
```

### 9.2 æ–°å¢è¡¨ç»“æ„

#### 9.2.1 è®¾å¤‡ä¿¡æ¯è¡¨

```sql
CREATE TABLE IF NOT EXISTS devices (
  device_id TEXT PRIMARY KEY,
  machine_id TEXT NOT NULL,
  platform TEXT NOT NULL,
  first_install_time TIMESTAMP NOT NULL,
  last_active_time TIMESTAMP NOT NULL,
  install_count INTEGER DEFAULT 1,
  created_at TIMESTAMP NOT NULL
);

CREATE INDEX idx_devices_machine_id ON devices(machine_id);
```

#### 9.2.1.5 ç”¨æˆ·ä¿¡æ¯è¡¨

```sql
CREATE TABLE IF NOT EXISTS user_profiles (
  device_id TEXT PRIMARY KEY,
  nickname TEXT,
  email TEXT,
  bio TEXT,
  avatar_path TEXT,
  created_at TIMESTAMP NOT NULL,
  updated_at TIMESTAMP NOT NULL,
  FOREIGN KEY (device_id) REFERENCES devices(device_id)
);

CREATE INDEX idx_user_profiles_email ON user_profiles(email);
```

**å­—æ®µè¯´æ˜**ï¼š
- `device_id`: è®¾å¤‡IDï¼ˆä¸»é”®ï¼Œå…³è”è®¾å¤‡è¡¨ï¼‰
- `nickname`: ç”¨æˆ·æ˜µç§°ï¼ˆå¯é€‰ï¼Œæœ€å¤š50å­—ç¬¦ï¼‰
- `email`: é‚®ç®±åœ°å€ï¼ˆå¯é€‰ï¼Œç”¨äºè”ç³»å’Œæ‰¾å›ï¼‰
- `bio`: ä¸ªäººç®€ä»‹ï¼ˆå¯é€‰ï¼Œæœ€å¤š500å­—ç¬¦ï¼‰
- `avatar_path`: å¤´åƒå›¾ç‰‡è·¯å¾„ï¼ˆç›¸å¯¹è·¯å¾„ï¼Œå¦‚ `avatars/abc123.png`ï¼‰
- `created_at`: åˆ›å»ºæ—¶é—´
- `updated_at`: æ›´æ–°æ—¶é—´

**å­˜å‚¨è§„åˆ™**ï¼š
- å¤´åƒæ–‡ä»¶å­˜å‚¨åœ¨ `~/Library/Application Support/MindVoice/avatars/`
- å¤´åƒæ–‡ä»¶å‘½åæ ¼å¼: `{device_id_hash}.{ext}`ï¼ˆå¦‚ `abc123.png`ï¼‰
- æ”¯æŒæ ¼å¼: PNG, JPG, JPEGï¼ˆæœ€å¤§ 5MBï¼‰
- é»˜è®¤å¤´åƒ: ä½¿ç”¨ç³»ç»Ÿé»˜è®¤å›¾æ ‡

#### 9.2.2 ä¼šå‘˜ä¿¡æ¯è¡¨

```sql
CREATE TABLE IF NOT EXISTS memberships (
  device_id TEXT PRIMARY KEY,
  tier TEXT NOT NULL DEFAULT 'free',
  status TEXT NOT NULL DEFAULT 'active',
  subscription_period INTEGER,
  activated_at TIMESTAMP NOT NULL,
  expires_at TIMESTAMP,
  auto_renew INTEGER NOT NULL DEFAULT 0,
  created_at TIMESTAMP NOT NULL,
  updated_at TIMESTAMP NOT NULL,
  FOREIGN KEY (device_id) REFERENCES devices(device_id),
  CHECK (subscription_period IS NULL OR (subscription_period >= 1 AND subscription_period <= 120)),
  CHECK (tier IN ('free', 'vip', 'pro', 'pro_plus')),
  CHECK (status IN ('active', 'expired', 'pending'))
);

CREATE INDEX idx_memberships_status ON memberships(status, expires_at);
CREATE INDEX idx_memberships_tier ON memberships(tier);
```

**å­—æ®µè¯´æ˜**ï¼š
- `expires_at`: å…è´¹ä¼šå‘˜ä¸º NULLï¼ˆæ°¸ä¹…æœ‰æ•ˆï¼‰ï¼Œä»˜è´¹ä¼šå‘˜æœ‰å…·ä½“è¿‡æœŸæ—¶é—´
- `subscription_period`: å…è´¹ä¼šå‘˜ä¸º NULLï¼Œä»˜è´¹ä¼šå‘˜ä¸ºè®¢é˜…æœˆæ•°
- `status`: ç§»é™¤ 'trial' çŠ¶æ€ï¼Œä»…ä¿ç•™ 'active', 'expired', 'pending'

#### 9.2.3 æ¶ˆè´¹è®°å½•è¡¨

```sql
CREATE TABLE IF NOT EXISTS consumption_records (
  id TEXT PRIMARY KEY,
  device_id TEXT NOT NULL,
  year INTEGER NOT NULL,
  month INTEGER NOT NULL,
  type TEXT NOT NULL,
  amount REAL NOT NULL,
  unit TEXT NOT NULL,
  model_source TEXT DEFAULT 'vendor',
  details TEXT,
  session_id TEXT,
  timestamp TIMESTAMP NOT NULL,
  created_at TIMESTAMP NOT NULL,
  FOREIGN KEY (device_id) REFERENCES devices(device_id),
  CHECK (type IN ('asr', 'llm')),
  CHECK (unit IN ('ms', 'tokens')),
  CHECK (model_source IN ('vendor', 'user')),
  CHECK (amount >= 0)
);

CREATE INDEX idx_consumption_device_time 
  ON consumption_records(device_id, year, month, timestamp DESC);
CREATE INDEX idx_consumption_type 
  ON consumption_records(device_id, type);
CREATE INDEX idx_consumption_model_source 
  ON consumption_records(device_id, type, model_source);
```

**å­—æ®µè¯´æ˜**ï¼š
- `model_source`: æ¨¡å‹æ¥æº
  - `'vendor'`: å‚å•†æä¾›çš„æ¨¡å‹ï¼ˆé»˜è®¤å€¼ï¼Œè®¡å…¥ä¼šå‘˜é¢åº¦ï¼‰
  - `'user'`: ç”¨æˆ·è‡ªå¤‡æ¨¡å‹ï¼ˆä¸è®¡å…¥ä¼šå‘˜é¢åº¦ï¼‰
- ä»… `model_source = 'vendor'` çš„è®°å½•è®¡å…¥æœˆåº¦æ±‡æ€»ç»Ÿè®¡

#### 9.2.4 æœˆåº¦æ¶ˆè´¹æ±‡æ€»è¡¨

```sql
CREATE TABLE IF NOT EXISTS monthly_consumption (
  device_id TEXT NOT NULL,
  year INTEGER NOT NULL,
  month INTEGER NOT NULL,
  asr_duration_ms INTEGER NOT NULL DEFAULT 0,
  llm_prompt_tokens INTEGER NOT NULL DEFAULT 0,
  llm_completion_tokens INTEGER NOT NULL DEFAULT 0,
  llm_total_tokens INTEGER NOT NULL DEFAULT 0,
  record_count INTEGER NOT NULL DEFAULT 0,
  created_at TIMESTAMP NOT NULL,
  updated_at TIMESTAMP NOT NULL,
  PRIMARY KEY (device_id, year, month),
  FOREIGN KEY (device_id) REFERENCES devices(device_id),
  CHECK (asr_duration_ms >= 0),
  CHECK (llm_total_tokens >= 0)
);

CREATE INDEX idx_monthly_consumption_device 
  ON monthly_consumption(device_id, year DESC, month DESC);
```

#### 9.2.5 ä¼šå‘˜å‡çº§å†å²è¡¨

```sql
CREATE TABLE IF NOT EXISTS membership_history (
  id TEXT PRIMARY KEY,
  device_id TEXT NOT NULL,
  from_tier TEXT NOT NULL,
  to_tier TEXT NOT NULL,
  subscription_period INTEGER NOT NULL,
  activated_at TIMESTAMP NOT NULL,
  expires_at TIMESTAMP NOT NULL,
  created_at TIMESTAMP NOT NULL,
  FOREIGN KEY (device_id) REFERENCES devices(device_id),
  CHECK (subscription_period >= 1)
);

CREATE INDEX idx_membership_history_device 
  ON membership_history(device_id, activated_at DESC);
```

### 9.3 æ•°æ®è¿ç§»

#### 9.3.1 è¿ç§»è„šæœ¬ä½ç½®

- è„šæœ¬æ–‡ä»¶: `scripts/migrate_database.py`
- æ‰§è¡Œæ–¹å¼: `python scripts/migrate_database.py`

#### 9.3.2 è¿ç§»æ­¥éª¤

```python
# scripts/migrate_database.py
def migrate_database():
    # 1. è¿æ¥åˆ°ç°æœ‰æ•°æ®åº“
    # 2. æ£€æŸ¥ç‰ˆæœ¬è¡¨
    # 3. æ‰§è¡Œæœªåº”ç”¨çš„è¿ç§»
    # 4. æ›´æ–°ç‰ˆæœ¬å·
    pass
```

#### 9.3.3 ç‰ˆæœ¬ç®¡ç†

```sql
CREATE TABLE IF NOT EXISTS schema_version (
  version INTEGER PRIMARY KEY,
  applied_at TIMESTAMP NOT NULL,
  description TEXT
);

-- åˆå§‹ç‰ˆæœ¬
INSERT INTO schema_version (version, applied_at, description)
VALUES (1, CURRENT_TIMESTAMP, 'ä¼šå‘˜ä½“ç³»åˆå§‹ç‰ˆæœ¬');
```

---

## åã€APIæ¥å£

### 10.1 è®¾å¤‡ç®¡ç†

#### GET /api/device/info
è·å–è®¾å¤‡ä¿¡æ¯

**å“åº”**:
```json
{
  "success": true,
  "data": {
    "device_id": "abc123-def456-...",
    "platform": "darwin",
    "first_install_time": "2026-01-05T10:00:00",
    "last_active_time": "2026-01-05T15:30:00",
    "install_count": 1
  }
}
```

#### POST /api/device/register
æ³¨å†Œæ–°è®¾å¤‡ï¼ˆé¦–æ¬¡å®‰è£…ï¼‰

**è¯·æ±‚**:
```json
{
  "machine_id": "machine-xxx",
  "platform": "darwin"
}
```

**å“åº”**:
```json
{
  "success": true,
  "data": {
    "device_id": "abc123-def456-...",
    "membership": {
      "tier": "free",
      "status": "active",
      "expires_at": null,
      "permanent": true
    }
  }
}
```

### 10.2 ä¼šå‘˜ç®¡ç†

#### GET /api/membership/info
è·å–ä¼šå‘˜ä¿¡æ¯

**å“åº”**:
```json
{
  "success": true,
  "data": {
    "tier": "vip",
    "status": "active",
    "days_remaining": 25,
    "activated_at": "2026-01-05T10:00:00",
    "expires_at": "2026-02-05T10:00:00",
    "subscription_period": 1,
    "permanent": false,
    "quota": {
      "asr_duration_ms_monthly": 36000000,
      "llm_tokens_monthly": 1000000
    }
  }
}
```

**æ³¨æ„**: 
- å…è´¹ä¼šå‘˜çš„ `expires_at` ä¸º `null`ï¼Œ`permanent` ä¸º `true`
- ä»˜è´¹ä¼šå‘˜çš„ `expires_at` æœ‰å…·ä½“æ—¶é—´ï¼Œ`permanent` ä¸º `false`

#### POST /api/membership/activate
æ¿€æ´»ä¼šå‘˜

**è¯·æ±‚**:
```json
{
  "activation_code": "VIP-3-A1B2-C3D4"
}
```

**å“åº”**:
```json
{
  "success": true,
  "message": "æ¿€æ´»æˆåŠŸï¼VIPä¼šå‘˜ï¼Œæœ‰æ•ˆæœŸ3ä¸ªæœˆ",
  "data": {
    "tier": "vip",
    "expires_at": "2026-04-05T10:00:00",
    "days_remaining": 90
  }
}
```

#### POST /api/membership/renew
ç»­è´¹ä¼šå‘˜

**è¯·æ±‚**:
```json
{
  "months": 3
}
```

**å“åº”**:
```json
{
  "success": true,
  "message": "ç»­è´¹æˆåŠŸï¼",
  "data": {
    "tier": "vip",
    "expires_at": "2026-05-05T10:00:00",
    "days_remaining": 120
  }
}
```

### 10.3 æ¶ˆè´¹ç»Ÿè®¡

#### GET /api/consumption/current
è·å–å½“æœˆæ¶ˆè´¹

**å“åº”**:
```json
{
  "success": true,
  "data": {
    "year": 2026,
    "month": 1,
    "asr": {
      "used": 28800000,
      "limit": 36000000,
      "remaining": 7200000,
      "percentage": 80.0
    },
    "llm": {
      "used": 500000,
      "limit": 1000000,
      "remaining": 500000,
      "percentage": 50.0
    },
    "reset_at": "2026-02-01T00:00:00"
  }
}
```

#### GET /api/consumption/history
è·å–å†å²æ¶ˆè´¹

**å‚æ•°**:
- `year`: å¹´ä»½ï¼ˆå¿…å¡«ï¼‰
- `month`: æœˆä»½ï¼ˆå¯é€‰ï¼Œ1-12ï¼‰
- `type`: ç±»å‹ï¼ˆå¯é€‰ï¼Œasr/llmï¼‰
- `limit`: é™åˆ¶æ¡æ•°ï¼ˆé»˜è®¤100ï¼‰
- `offset`: åç§»é‡ï¼ˆé»˜è®¤0ï¼‰

**å“åº”**:
```json
{
  "success": true,
  "data": {
    "year": 2026,
    "month": 1,
    "records": [
      {
        "id": "record-1",
        "type": "asr",
        "amount": 900000,
        "unit": "ms",
        "timestamp": "2026-01-05T14:30:00",
        "details": {
          "duration_ms": 900000,
          "start_time": 1704441600000,
          "end_time": 1704442500000
        }
      }
    ],
    "total": 156
  }
}
```

### 10.4 é…é¢æ£€æŸ¥

#### POST /api/quota/check
æ£€æŸ¥é¢åº¦æ˜¯å¦è¶³å¤Ÿ

**è¯·æ±‚**:
```json
{
  "type": "asr",
  "estimated_amount": 600000
}
```

**å“åº”**:
```json
{
  "success": true,
  "data": {
    "allowed": true
  }
}
```

æˆ–é¢åº¦ä¸è¶³ï¼š
```json
{
  "success": false,
  "data": {
    "allowed": false,
    "reason": "ASRé¢åº¦ä¸è¶³ï¼Œå‰©ä½™120000msï¼Œéœ€è¦600000ms"
  }
}
```

### 10.5 æ¿€æ´»ç éªŒè¯

#### POST /api/activation/validate
éªŒè¯æ¿€æ´»ç 

**è¯·æ±‚**:
```json
{
  "code": "VIP-3-A1B2-C3D4"
}
```

**å“åº”**:
```json
{
  "success": true,
  "data": {
    "valid": true,
    "tier": "vip",
    "months": 3
  }
}
```

æˆ–éªŒè¯å¤±è´¥ï¼š
```json
{
  "success": false,
  "error": "æ¿€æ´»ç æ ¼å¼ä¸æ­£ç¡®"
}
```

### 10.6 ç”¨æˆ·ä¿¡æ¯ç®¡ç†

#### GET /api/user/profile
è·å–ç”¨æˆ·ä¿¡æ¯

**å“åº”**:
```json
{
  "success": true,
  "data": {
    "device_id": "abc123-def456-...",
    "nickname": "å¼ ä¸‰",
    "email": "zhangsan@example.com",
    "bio": "çƒ­çˆ±ç§‘æŠ€çš„äº§å“ç»ç†",
    "avatar_url": "/api/avatars/abc123.png",
    "created_at": "2026-01-05T10:00:00",
    "updated_at": "2026-01-05T15:30:00"
  }
}
```

#### PUT /api/user/profile
æ›´æ–°ç”¨æˆ·ä¿¡æ¯

**è¯·æ±‚**:
```json
{
  "nickname": "æå››",
  "email": "lisi@example.com",
  "bio": "çƒ­çˆ±å­¦ä¹ çš„å¼€å‘è€…"
}
```

**å“åº”**:
```json
{
  "success": true,
  "message": "ç”¨æˆ·ä¿¡æ¯æ›´æ–°æˆåŠŸ",
  "data": {
    "nickname": "æå››",
    "email": "lisi@example.com",
    "bio": "çƒ­çˆ±å­¦ä¹ çš„å¼€å‘è€…",
    "updated_at": "2026-01-05T16:00:00"
  }
}
```

#### POST /api/user/avatar
ä¸Šä¼ ç”¨æˆ·å¤´åƒ

**è¯·æ±‚**:
```json
{
  "image_data": "data:image/png;base64,iVBORw0KGg..."
}
```

**å“åº”**:
```json
{
  "success": true,
  "message": "å¤´åƒä¸Šä¼ æˆåŠŸ",
  "data": {
    "avatar_url": "/api/avatars/abc123.png"
  }
}
```

#### GET /api/avatars/{filename}
è·å–ç”¨æˆ·å¤´åƒ

**å“åº”**: å›¾ç‰‡æ–‡ä»¶ï¼ˆFileResponseï¼‰

**å®‰å…¨æªæ–½**:
- é˜²æ­¢è·¯å¾„éå†æ”»å‡»ï¼ˆæ£€æŸ¥ `..`ã€`/`ã€`\`ï¼‰
- ä»…å…è®¸è®¿é—® avatars ç›®å½•ä¸‹çš„æ–‡ä»¶
- æ–‡ä»¶å¤§å°é™åˆ¶ï¼š5MB
- æ ¼å¼é™åˆ¶ï¼šPNG, JPG, JPEG

### 10.7 æ¨¡å‹é…ç½®ç®¡ç†

#### GET /api/model/config
è·å–å½“å‰æ¨¡å‹é…ç½®

**å“åº”**:
```json
{
  "success": true,
  "data": {
    "model_source": "vendor",
    "vendor_model": {
      "provider": "openai",
      "model": "gpt-4"
    },
    "user_model": {
      "configured": false
    }
  }
}
```

#### PUT /api/model/config
æ›´æ–°æ¨¡å‹é…ç½®

**è¯·æ±‚**:
```json
{
  "model_source": "user",
  "user_model": {
    "provider": "openai",
    "api_key": "sk-...",
    "model": "gpt-4",
    "base_url": "https://api.openai.com"
  }
}
```

**å“åº”**:
```json
{
  "success": true,
  "message": "æ¨¡å‹é…ç½®æ›´æ–°æˆåŠŸ",
  "data": {
    "model_source": "user"
  }
}
```

#### POST /api/model/test
æµ‹è¯•æ¨¡å‹è¿æ¥

**è¯·æ±‚**:
```json
{
  "provider": "openai",
  "api_key": "sk-...",
  "model": "gpt-4",
  "base_url": "https://api.openai.com"
}
```

**å“åº”**:
```json
{
  "success": true,
  "message": "è¿æ¥æˆåŠŸ",
  "data": {
    "latency_ms": 156,
    "model_available": true
  }
}
```

**è¯´æ˜**:
- ç”¨æˆ·è‡ªå¤‡æ¨¡å‹çš„ API Key åŠ å¯†å­˜å‚¨åœ¨æœ¬åœ°
- åˆ‡æ¢æ¨¡å‹æ¥æºåç«‹å³ç”Ÿæ•ˆ
- ä½¿ç”¨ç”¨æˆ·è‡ªå¤‡æ¨¡å‹æ—¶ä¸è®¡å…¥ä¼šå‘˜é¢åº¦

---

## åä¸€ã€å®‰å…¨æœºåˆ¶

### 11.1 è®¾å¤‡ç»‘å®šå®‰å…¨

#### 11.1.1 é˜²ä¼ªé€ 

- âœ… è®¾å¤‡IDåŸºäºç¡¬ä»¶ä¿¡æ¯ï¼Œéš¾ä»¥ä¼ªé€ 
- âœ… ä½¿ç”¨SHA-256å“ˆå¸Œï¼Œä¸å¯é€†
- âœ… æ·»åŠ ç›å€¼ï¼Œå¢åŠ ç ´è§£éš¾åº¦
- âœ… UUIDæ ¼å¼ï¼Œä¸æš´éœ²ç¡¬ä»¶ä¿¡æ¯

#### 11.1.2 é˜²å¤šè®¾å¤‡

- âœ… ä¸€ä¸ªæ¿€æ´»ç åªèƒ½ç»‘å®šä¸€ä¸ªè®¾å¤‡
- âœ… æ¿€æ´»ååŠ å…¥é»‘åå•ï¼Œä¸å¯é‡å¤ä½¿ç”¨
- âœ… æœ¬åœ°å­˜å‚¨é»‘åå•ï¼Œç¦»çº¿éªŒè¯

### 11.2 æ¿€æ´»ç å®‰å…¨

#### 11.2.1 ç”Ÿæˆå®‰å…¨

- âœ… ä½¿ç”¨åŠ å¯†å®‰å…¨çš„éšæœºæ•°ç”Ÿæˆå™¨ï¼ˆ`crypto.randomBytes()`ï¼‰
- âœ… æ ¡éªŒç é•¿åº¦è¶³å¤Ÿï¼ˆ8ä½ï¼Œ36^8 â‰ˆ 2.8ä¸‡äº¿ç§ç»„åˆï¼‰
- âœ… æ ¼å¼æ˜ç¡®ï¼Œæ˜“äºéªŒè¯
- âœ… åŒ…å«ä¼šå‘˜ä¿¡æ¯ï¼Œä¾¿äºè¿½æº¯

#### 11.2.2 éªŒè¯å®‰å…¨

```typescript
// å¤šå±‚éªŒè¯
async function secureValidation(code: string): Promise<boolean> {
  // 1. æ ¼å¼éªŒè¯ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰
  // 2. å†…å®¹éªŒè¯ï¼ˆç­‰çº§ã€æœˆæ•°ï¼‰
  // 3. é»‘åå•éªŒè¯ï¼ˆæ˜¯å¦å·²ä½¿ç”¨ï¼‰
  // 4. æ—¶æ•ˆæ€§éªŒè¯ï¼ˆå¯é€‰ï¼Œæ¿€æ´»ç è¿‡æœŸæ—¶é—´ï¼‰
  // 5. äº‘ç«¯éªŒè¯ï¼ˆå¯é€‰ï¼ŒPhase 2ï¼‰
}
```

### 11.3 æ•°æ®å®‰å…¨

#### 11.3.1 æœ¬åœ°åŠ å¯†

- âœ… æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨ï¼ˆæ¿€æ´»ç é»‘åå•ï¼‰
- âœ… ä½¿ç”¨AES-256åŠ å¯†ç®—æ³•
- âœ… å¯†é’¥æ´¾ç”Ÿè‡ªè®¾å¤‡IDï¼ˆPBKDF2ï¼‰
- âœ… æ•°æ®åº“æ–‡ä»¶æƒé™æ§åˆ¶ï¼ˆchmod 600ï¼‰

#### 11.3.2 ä¼ è¾“å®‰å…¨

- âœ… æœ¬åœ°é€šä¿¡ï¼ˆElectron IPCï¼‰
- âœ… æ•°æ®å®Œæ•´æ€§æ ¡éªŒ
- â³ HTTPSé€šä¿¡ï¼ˆå¦‚æœæœ‰äº‘ç«¯æœåŠ¡ï¼ŒPhase 2ï¼‰
- â³ é˜²é‡æ”¾æ”»å‡»ï¼ˆå¦‚æœæœ‰äº‘ç«¯æœåŠ¡ï¼ŒPhase 2ï¼‰

### 11.4 é˜²ä½œå¼Š

#### 11.4.1 æ¶ˆè´¹è®°å½•æ ¡éªŒ

```typescript
function validateConsumption(record: ConsumptionRecord): boolean {
  // 1. æ—¶é—´æˆ³ä¸èƒ½æ˜¯æœªæ¥
  if (record.timestamp > Date.now()) {
    return false;
  }
  
  // 2. æ¶ˆè´¹é‡åœ¨åˆç†èŒƒå›´
  if (record.type === 'asr' && record.amount > 10 * 60 * 60 * 1000) {
    return false; // å•æ¬¡ä¸è¶…è¿‡10å°æ—¶
  }
  
  if (record.type === 'llm' && record.amount > 1000000) {
    return false; // å•æ¬¡ä¸è¶…è¿‡100ä¸‡tokens
  }
  
  // 3. è®¾å¤‡IDåŒ¹é…
  // 4. è®°å½•å®Œæ•´æ€§æ ¡éªŒ
  
  return true;
}
```

#### 11.4.2 å¼‚å¸¸æ£€æµ‹

| å¼‚å¸¸æƒ…å†µ | æ£€æµ‹è§„åˆ™ | å¤„ç†æ–¹å¼ |
|---------|---------|---------|
| çŸ­æ—¶é—´å¤§é‡æ¶ˆè´¹ | 1å°æ—¶å†…æ¶ˆè´¹è¶…è¿‡æ—¥å¸¸10å€ | æ ‡è®°å¼‚å¸¸ï¼Œäººå·¥å®¡æ ¸ |
| åŒä¸€è®¾å¤‡å¤šæ¬¡æ¿€æ´» | 7å¤©å†…æ¿€æ´»è¶…è¿‡3æ¬¡ | é™åˆ¶æ¿€æ´»ï¼Œè”ç³»å®¢æœ |
| æ—¶é—´ç¯¡æ”¹ | ç³»ç»Ÿæ—¶é—´å¼‚å¸¸å›é€€ | æ‹’ç»è®°å½•ï¼Œæç¤ºç”¨æˆ· |
| æ•°æ®åº“ç¯¡æ”¹ | æ¶ˆè´¹è®°å½•ä¸è¿ç»­ | æ ‡è®°å¼‚å¸¸ï¼Œé‡æ–°éªŒè¯ |

---

## åäºŒã€è¿è¥æ”¯æŒ

### 12.1 å®¢æœåå°ç³»ç»Ÿ

#### 12.1.1 åŠŸèƒ½æ¨¡å—

**æ ¸å¿ƒåŠŸèƒ½**:
- âœ… æ¿€æ´»ç ç”Ÿæˆä¸ç®¡ç†
- âœ… ç”¨æˆ·æŸ¥è¯¢ï¼ˆé€šè¿‡è®¾å¤‡IDï¼‰
- âœ… ä¼šå‘˜ä¿¡æ¯æŸ¥çœ‹
- âœ… æ¶ˆè´¹è®°å½•æŸ¥è¯¢
- âœ… æ‰‹åŠ¨ç»­è´¹/å‡çº§
- â³ å·¥å•ç³»ç»Ÿï¼ˆPhase 2ï¼‰

#### 12.1.2 æ¿€æ´»ç ç”Ÿæˆå·¥å…·

**å®ç°æ–¹å¼**: Pythonè„šæœ¬

```bash
# ç”Ÿæˆæ¿€æ´»ç 
python scripts/generate_activation_codes.py \
  --tier vip \
  --months 3 \
  --count 100 \
  --output codes.csv
```

**è¾“å‡ºæ ¼å¼** (CSV):
```csv
æ¿€æ´»ç ,ç­‰çº§,æœˆæ•°,ç”Ÿæˆæ—¶é—´,çŠ¶æ€
VIP-3-A1B2-C3D4,vip,3,2026-01-05 10:00:00,æœªä½¿ç”¨
VIP-3-X7Y8-Z9K2,vip,3,2026-01-05 10:00:00,æœªä½¿ç”¨
```

### 12.2 ç”¨æˆ·åé¦ˆ

#### 12.2.1 åé¦ˆæ¸ é“

**å®˜æ–¹æ¸ é“**:
- åº”ç”¨å†…åé¦ˆæŒ‰é’®
- é‚®ç®±ï¼šsupport@mindvoice.com
- å¾®ä¿¡å®¢æœï¼šMindVoice-Support
- GitHub Issuesï¼ˆæŠ€æœ¯é—®é¢˜ï¼‰

#### 12.2.2 åé¦ˆå¤„ç†æµç¨‹

```
ç”¨æˆ·æäº¤åé¦ˆ
    â†“
è‡ªåŠ¨æ”¶é›†ç¯å¢ƒä¿¡æ¯ï¼ˆè®¾å¤‡IDã€ä¼šå‘˜ç­‰çº§ã€ç‰ˆæœ¬å·ï¼‰
    â†“
å®¢æœæ¥æ”¶å·¥å•
    â†“
åˆ†ç±»å¤„ç†
    â”œâ”€â”€ æŠ€æœ¯é—®é¢˜ â†’ æŠ€æœ¯å›¢é˜Ÿ
    â”œâ”€â”€ å•†åŠ¡é—®é¢˜ â†’ å•†åŠ¡å›¢é˜Ÿ
    â””â”€â”€ å…¶ä»–é—®é¢˜ â†’ å®¢æœå›¢é˜Ÿ
    â†“
å›å¤ç”¨æˆ·ï¼ˆ24å°æ—¶å†…å“åº”ï¼‰
    â†“
å…³é—­å·¥å•ï¼ˆè®°å½•å¤„ç†ç»“æœï¼‰
```

### 12.3 æ•°æ®ç»Ÿè®¡

#### 12.3.1 è¿è¥æŒ‡æ ‡

**å…³é”®æŒ‡æ ‡**:
- ğŸ“Š æ€»è®¾å¤‡æ•°
- ğŸ“Š å„ç­‰çº§ä¼šå‘˜æ•°ï¼ˆFREE/VIP/PRO/PRO+ï¼‰
- ğŸ“Š æ–°å¢/æµå¤±ç”¨æˆ·ï¼ˆæ—¥/å‘¨/æœˆï¼‰
- ğŸ“Š æ¶ˆè´¹ç»Ÿè®¡ï¼ˆASRæ€»æ—¶é•¿ã€LLMæ€»tokensï¼‰
- ğŸ“Š æ¿€æ´»ç ä½¿ç”¨ç‡
- ğŸ“Š ç»­è´¹ç‡
- ğŸ“Š å…è´¹ç”¨æˆ·å‡çº§è½¬åŒ–ç‡

#### 12.3.2 æŠ¥è¡¨ç³»ç»Ÿ

**æŠ¥è¡¨ç±»å‹**:
- ğŸ“ˆ æ—¥æŠ¥ï¼šæ–°å¢ç”¨æˆ·ã€æ¿€æ´»ä¼šå‘˜ã€æ¶ˆè´¹ç»Ÿè®¡
- ğŸ“ˆ å‘¨æŠ¥ï¼šæ¶ˆè´¹è¶‹åŠ¿ã€ä¼šå‘˜å˜åŒ–ã€å¼‚å¸¸æ£€æµ‹
- ğŸ“ˆ æœˆæŠ¥ï¼šå®Œæ•´æ•°æ®åˆ†æã€æ”¶å…¥é¢„æµ‹ã€ä¼˜åŒ–å»ºè®®

**å®ç°æ–¹å¼**: 
- ç»Ÿè®¡è„šæœ¬: `scripts/generate_report.py`
- æ•°æ®å¯¼å‡º: CSV/Excel/JSON
- å¯è§†åŒ–: å¯é€‰é›†æˆ Grafanaï¼ˆPhase 2ï¼‰

---

## åä¸‰ã€æŠ€æœ¯å®æ–½

### 13.1 å®æ–½é˜¶æ®µ

#### é˜¶æ®µä¸€ï¼šåŸºç¡€æ¡†æ¶ï¼ˆ2å‘¨ï¼‰

**Week 1-2: æ ¸å¿ƒåŸºç¡€è®¾æ–½**

**ä»»åŠ¡æ¸…å•**:
- [x] è®¾å¤‡IDç”Ÿæˆæ¨¡å—ï¼ˆ`device-id.ts`ï¼‰
  - macOS: ç³»ç»Ÿåºåˆ—å·/Hardware UUID
  - Windows: æœºå™¨GUID
  - Linux: /etc/machine-id
- [x] æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡ï¼ˆå«ç”¨æˆ·ä¿¡æ¯è¡¨ï¼‰
- [x] æ•°æ®åº“è¿ç§»è„šæœ¬ï¼ˆ`migrate_database.py`ï¼‰
- [x] ä¼šå‘˜ä¿¡æ¯ç®¡ç†æœåŠ¡ï¼ˆ`membership_service.py`ï¼‰
- [x] ç”¨æˆ·ä¿¡æ¯ç®¡ç†æœåŠ¡ï¼ˆ`user_profile_service.py`ï¼‰
- [x] æ¨¡å‹é…ç½®ç®¡ç†æœåŠ¡ï¼ˆ`model_config_service.py`ï¼‰
- [x] åŸºç¡€UIæ¡†æ¶ï¼ˆReactç»„ä»¶éª¨æ¶ï¼‰

**äº¤ä»˜ç‰©**:
- âœ… è®¾å¤‡IDç”Ÿæˆå’Œå­˜å‚¨
- âœ… æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ï¼ˆå«ç”¨æˆ·ä¿¡æ¯è¡¨ï¼‰
- âœ… ä¼šå‘˜ä¿¡æ¯CRUDæ¥å£
- âœ… ç”¨æˆ·ä¿¡æ¯CRUDæ¥å£
- âœ… æ¨¡å‹é…ç½®CRUDæ¥å£
- âœ… åŸºç¡€UIç»„ä»¶ï¼ˆç©ºæ¡†æ¶ï¼‰
- âœ… ç¡®è®¤æ‰€æœ‰åŠŸèƒ½æ¨¡å—æ— æƒé™æ£€æŸ¥ï¼ˆå…¨éƒ¨å¼€æ”¾ï¼‰
- âœ… æ”¯æŒåŒæ¨¡å‹æ¶æ„ï¼ˆå‚å•†æ¨¡å‹ + ç”¨æˆ·è‡ªå¤‡æ¨¡å‹ï¼‰

**æµ‹è¯•éªŒè¯**:
- è®¾å¤‡IDç”Ÿæˆæµ‹è¯•ï¼ˆåŒä¸€æœºå™¨å¤šæ¬¡ç”Ÿæˆåº”ç›¸åŒï¼‰
- æ•°æ®åº“åˆ›å»ºæµ‹è¯•
- APIæ¥å£æµ‹è¯•ï¼ˆPostman/curlï¼‰
- åŠŸèƒ½è®¿é—®æµ‹è¯•ï¼ˆå…è´¹ç”¨æˆ·å¯è®¿é—®æ‰€æœ‰åŠŸèƒ½ï¼‰

#### é˜¶æ®µäºŒï¼šæ¶ˆè´¹è®¡é‡ï¼ˆ2-3å‘¨ï¼‰

**Week 3-5: æ¶ˆè´¹ç»Ÿè®¡ä¸é¢åº¦ç®¡ç†**

**ä»»åŠ¡æ¸…å•**:
- [ ] ASRæ¶ˆè´¹ç»Ÿè®¡
  - é›†æˆåˆ° `volcano.py` çš„ `_handle_recognition_result()`
  - æå– time_infoï¼Œè®¡ç®— duration_ms
- [ ] LLMæ¶ˆè´¹ç»Ÿè®¡
  - é›†æˆåˆ° `litellm_provider.py` çš„ `chat()`
  - åˆ¤æ–­æ¨¡å‹æ¥æºï¼ˆå‚å•† vs ç”¨æˆ·è‡ªå¤‡ï¼‰
  - ä»…å‚å•†æ¨¡å‹æå– usage å¯¹è±¡å¹¶è®°å½•
- [ ] æ¶ˆè´¹æœåŠ¡ï¼ˆ`consumption_service.py`ï¼‰
  - è®°å½•æ¶ˆè´¹ï¼ˆæ·»åŠ  model_source å­—æ®µï¼‰
  - æœˆåº¦æ±‡æ€»ï¼ˆä»…ç»Ÿè®¡ model_source='vendor' çš„è®°å½•ï¼‰
  - é¢åº¦æ£€æŸ¥ï¼ˆç”¨æˆ·è‡ªå¤‡æ¨¡å‹è·³è¿‡æ£€æŸ¥ï¼‰
- [ ] æœˆåº¦é‡ç½®æœºåˆ¶ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰
- [ ] é¢åº¦æ£€æŸ¥å‰ç½®éªŒè¯ï¼ˆåŒºåˆ†æ¨¡å‹æ¥æºï¼‰

**äº¤ä»˜ç‰©**:
- âœ… æ¶ˆè´¹è®°å½•å®Œæ•´æµç¨‹ï¼ˆæ”¯æŒåŒæ¨¡å‹ï¼‰
- âœ… å®æ—¶é¢åº¦ç›‘æ§ï¼ˆä»…å‚å•†æ¨¡å‹ï¼‰
- âœ… è¶…é™å¤„ç†æœºåˆ¶ï¼ˆå‚å•†æ¨¡å‹é™åˆ¶ï¼Œç”¨æˆ·è‡ªå¤‡ä¸é™ï¼‰
- âœ… APIæ¥å£ï¼ˆ/api/consumption/*ï¼‰
- âœ… æ¨¡å‹æ¥æºè‡ªåŠ¨è¯†åˆ«å’ŒåŒºåˆ†è®¡è´¹

**æµ‹è¯•éªŒè¯**:
- æ¶ˆè´¹è®°å½•å‡†ç¡®æ€§æµ‹è¯•
- é¢åº¦è®¡ç®—æµ‹è¯•
- è¶…é™é˜»æ­¢æµ‹è¯•
- æœˆåº¦é‡ç½®æµ‹è¯•

#### é˜¶æ®µä¸‰ï¼šæ¿€æ´»ç ç³»ç»Ÿï¼ˆ1-2å‘¨ï¼‰

**Week 6-7: æ¿€æ´»ç ç”Ÿæˆä¸éªŒè¯**

**ä»»åŠ¡æ¸…å•**:
- [ ] æ¿€æ´»ç ç”Ÿæˆè§„åˆ™ï¼ˆ`generate_activation_codes.py`ï¼‰
- [ ] æ¿€æ´»ç éªŒè¯é€»è¾‘ï¼ˆ`activation_service.py`ï¼‰
- [ ] æ¿€æ´»ç•Œé¢ï¼ˆ`ActivationView.tsx`ï¼‰
- [ ] é»‘åå•ç®¡ç†ï¼ˆæœ¬åœ°JSONï¼‰
- [ ] APIæ¥å£ï¼ˆ/api/activation/*ï¼‰

**äº¤ä»˜ç‰©**:
- âœ… æ¿€æ´»ç ç”Ÿæˆå·¥å…·ï¼ˆè„šæœ¬ï¼‰
- âœ… æ¿€æ´»æµç¨‹å®Œæ•´å®ç°
- âœ… æ¿€æ´»ç•Œé¢ï¼ˆUIï¼‰
- âœ… éªŒè¯é€»è¾‘ï¼ˆå‰ç«¯+åç«¯ï¼‰

**æµ‹è¯•éªŒè¯**:
- æ¿€æ´»ç æ ¼å¼éªŒè¯æµ‹è¯•
- æ¿€æ´»æˆåŠŸæµ‹è¯•
- é‡å¤ä½¿ç”¨é˜»æ­¢æµ‹è¯•
- é»‘åå•æœºåˆ¶æµ‹è¯•

#### é˜¶æ®µå››ï¼šUIå®Œå–„ï¼ˆ1-2å‘¨ï¼‰

**Week 8-9: ç”¨æˆ·ç•Œé¢ä¸ä½“éªŒ**

**ä»»åŠ¡æ¸…å•**:
- [ ] ä¼šå‘˜ä¿¡æ¯ç•Œé¢ï¼ˆ`MembershipView.tsx`ï¼‰
- [ ] æ¶ˆè´¹ç»Ÿè®¡ç•Œé¢ï¼ˆ`ConsumptionHistoryView.tsx`ï¼‰
- [ ] ç”¨æˆ·ä¿¡æ¯ç•Œé¢ï¼ˆ`UserProfileView.tsx`ï¼‰
- [ ] æ¨¡å‹é…ç½®ç•Œé¢ï¼ˆ`ModelConfigView.tsx`ï¼‰
- [ ] å¤´åƒä¸Šä¼ ç»„ä»¶ï¼ˆ`AvatarUpload.tsx`ï¼‰
- [ ] å®æ—¶æç¤ºç»„ä»¶ï¼ˆ`QuotaIndicator.tsx`ï¼‰
- [ ] åˆ°æœŸæé†’åŠŸèƒ½ï¼ˆå¯¹è¯æ¡†ï¼‰
- [ ] æ¬¢è¿ç•Œé¢ï¼ˆé¦–æ¬¡å®‰è£…ï¼‰
- [ ] æ ·å¼ä¼˜åŒ–ï¼ˆCSSï¼‰

**äº¤ä»˜ç‰©**:
- âœ… å®Œæ•´çš„ç”¨æˆ·ç•Œé¢
- âœ… ç”¨æˆ·ä¿¡æ¯ç®¡ç†ç•Œé¢
- âœ… æ¨¡å‹é…ç½®ç®¡ç†ç•Œé¢
- âœ… å¤´åƒä¸Šä¼ åŠŸèƒ½
- âœ… å®æ—¶æç¤ºç³»ç»Ÿï¼ˆåŒºåˆ†æ¨¡å‹æ¥æºï¼‰
- âœ… åˆ°æœŸæé†’åŠŸèƒ½
- âœ… å“åº”å¼è®¾è®¡

**æµ‹è¯•éªŒè¯**:
- UIäº¤äº’æµ‹è¯•
- å¤´åƒä¸Šä¼ æµ‹è¯•
- æ¨¡å‹é…ç½®åˆ‡æ¢æµ‹è¯•
- æ¨¡å‹è¿æ¥æµ‹è¯•
- ä¸åŒå±å¹•åˆ†è¾¨ç‡æµ‹è¯•
- çŠ¶æ€æ›´æ–°å®æ—¶æ€§æµ‹è¯•

#### é˜¶æ®µäº”ï¼šæµ‹è¯•ä¸ä¼˜åŒ–ï¼ˆ1å‘¨ï¼‰

**Week 10: å…¨é¢æµ‹è¯•ä¸ä¼˜åŒ–**

**ä»»åŠ¡æ¸…å•**:
- [ ] åŠŸèƒ½æµ‹è¯•ï¼ˆå®Œæ•´æµç¨‹ï¼‰
- [ ] å®‰å…¨æµ‹è¯•ï¼ˆé˜²ä½œå¼Šã€é˜²ç¯¡æ”¹ï¼‰
- [ ] æ€§èƒ½ä¼˜åŒ–
  - æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
  - UIå“åº”é€Ÿåº¦ä¼˜åŒ–
  - å†…å­˜å ç”¨ä¼˜åŒ–
- [ ] ç”¨æˆ·ä½“éªŒä¼˜åŒ–
  - é”™è¯¯æç¤ºä¼˜åŒ–
  - åŠ è½½çŠ¶æ€ä¼˜åŒ–
  - å¼•å¯¼æµç¨‹ä¼˜åŒ–
- [ ] æ–‡æ¡£å®Œå–„

**äº¤ä»˜ç‰©**:
- âœ… æµ‹è¯•æŠ¥å‘Š
- âœ… Bugä¿®å¤æ¸…å•
- âœ… æ€§èƒ½ä¼˜åŒ–æŠ¥å‘Š
- âœ… ç”¨æˆ·æ‰‹å†Œ

**æµ‹è¯•éªŒè¯**:
- å®Œæ•´æµç¨‹æµ‹è¯•ï¼ˆä»å®‰è£…åˆ°ç»­è´¹ï¼‰
- è¾¹ç•Œæƒ…å†µæµ‹è¯•
- å‹åŠ›æµ‹è¯•
- å®‰å…¨æµ‹è¯•

### 13.2 æŠ€æœ¯æ ˆ

#### 13.2.1 å‰ç«¯ï¼ˆElectron + Reactï¼‰

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|-----|------|------|
| Electron | å½“å‰é¡¹ç›®ç‰ˆæœ¬ | æ¡Œé¢åº”ç”¨æ¡†æ¶ |
| React | 18.x | UIæ¡†æ¶ |
| TypeScript | 5.x | ç±»å‹å®‰å…¨ |
| Vite | å½“å‰é¡¹ç›®ç‰ˆæœ¬ | æ„å»ºå·¥å…· |

**æ–°å¢ä¾èµ–**:
```json
{
  "crypto": "^1.0.1",
  "@types/crypto": "^1.0.0"
}
```

#### 13.2.2 åç«¯ï¼ˆPython + FastAPIï¼‰

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|-----|------|------|
| FastAPI | å½“å‰é¡¹ç›®ç‰ˆæœ¬ | APIæ¡†æ¶ |
| SQLAlchemy | 2.x | ORM |
| Pydantic | 2.x | æ•°æ®éªŒè¯ |
| APScheduler | 3.x | å®šæ—¶ä»»åŠ¡ |

**æ–°å¢ä¾èµ–** (`requirements.txt`):
```txt
apscheduler>=3.10.0
```

#### 13.2.3 æ•°æ®åº“

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|-----|------|------|
| SQLite | 3.x | æœ¬åœ°æ•°æ®åº“ |

**æ•°æ®åº“æ–‡ä»¶**:
- ç°æœ‰: `history.db`ï¼ˆå†å²è®°å½•ï¼‰
- æ–°å¢: `membership.db`ï¼ˆä¼šå‘˜ä¿¡æ¯ï¼‰
- æ–°å¢: `consumption.db`ï¼ˆæ¶ˆè´¹è®°å½•ï¼‰

**æ³¨æ„**: ä¹Ÿå¯ä»¥è€ƒè™‘ç»Ÿä¸€åˆ°ä¸€ä¸ªæ•°æ®åº“æ–‡ä»¶ï¼Œé€šè¿‡è¡¨å‰ç¼€åŒºåˆ†ã€‚

#### 13.2.4 å·¥å…·

| å·¥å…· | ç”¨é€” |
|-----|------|
| Git | ç‰ˆæœ¬æ§åˆ¶ |
| ESLint | ä»£ç æ£€æŸ¥ï¼ˆå‰ç«¯ï¼‰ |
| Prettier | ä»£ç æ ¼å¼åŒ– |
| Black | ä»£ç æ ¼å¼åŒ–ï¼ˆPythonï¼‰ |
| pytest | å•å…ƒæµ‹è¯•ï¼ˆPythonï¼‰ |
| Jest | å•å…ƒæµ‹è¯•ï¼ˆå‰ç«¯ï¼‰ |

---

## åå››ã€æµ‹è¯•è®¡åˆ’

### 14.1 åŠŸèƒ½æµ‹è¯•

#### 14.1.1 è®¾å¤‡è¯†åˆ«

æµ‹è¯•ç”¨ä¾‹:
- [ ] TC-D-001: é¦–æ¬¡å®‰è£…ç”Ÿæˆè®¾å¤‡ID
- [ ] TC-D-002: é‡æ–°å®‰è£…æ¢å¤è®¾å¤‡IDï¼ˆè®¾å¤‡IDåº”ç›¸åŒï¼‰
- [ ] TC-D-003: ä¸åŒæœºå™¨ç”Ÿæˆä¸åŒID
- [ ] TC-D-004: ç¡¬ä»¶æ›´æ¢æ£€æµ‹ï¼ˆå¯é€‰ï¼‰
- [ ] TC-D-005: é™çº§æ–¹æ¡ˆï¼ˆæ— æ³•è·å–ç¡¬ä»¶ä¿¡æ¯æ—¶ï¼‰

#### 14.1.2 ä¼šå‘˜ç®¡ç†

æµ‹è¯•ç”¨ä¾‹:
- [ ] TC-M-001: å…è´¹ç”¨æˆ·æ³¨å†Œï¼ˆæ°¸ä¹…æœ‰æ•ˆï¼‰
- [ ] TC-M-002: ä¼šå‘˜æ¿€æ´»ï¼ˆè¾“å…¥æ¿€æ´»ç ï¼‰
- [ ] TC-M-003: ä¼šå‘˜ç»­è´¹ï¼ˆåœ¨åŸæœ‰åŸºç¡€ä¸Šå»¶é•¿ï¼‰
- [ ] TC-M-004: ä¼šå‘˜å‡çº§ï¼ˆä»VIPåˆ°PROï¼‰
- [ ] TC-M-005: è‡ªåŠ¨é™çº§ï¼ˆåˆ°æœŸåé™çº§åˆ°å…è´¹ï¼‰
- [ ] TC-M-006: ä¼šå‘˜çŠ¶æ€æ˜¾ç¤ºï¼ˆæœ‰æ•ˆ/è¿‡æœŸ/å…è´¹ï¼‰
- [ ] TC-M-007: åŠŸèƒ½è®¿é—®ï¼ˆæ‰€æœ‰ç­‰çº§å‡å¯è®¿é—®æ‰€æœ‰åŠŸèƒ½ï¼‰
- [ ] TC-M-008: å…è´¹ä¼šå‘˜æ°¸ä¹…æ€§éªŒè¯ï¼ˆæ— è¿‡æœŸæ—¶é—´ï¼‰

#### 14.1.3 æ¶ˆè´¹è®¡é‡

æµ‹è¯•ç”¨ä¾‹:
- [ ] TC-C-001: ASRæ¶ˆè´¹è®°å½•ï¼ˆå‡†ç¡®è®°å½•æ—¶é•¿ï¼‰
- [ ] TC-C-002: LLMæ¶ˆè´¹è®°å½•ï¼ˆå‡†ç¡®è®°å½•tokensï¼‰
- [ ] TC-C-003: æœˆåº¦æ±‡æ€»ï¼ˆæ­£ç¡®ç´¯åŠ ï¼‰
- [ ] TC-C-004: é¢åº¦æ£€æŸ¥ï¼ˆæ­£ç¡®åˆ¤æ–­æ˜¯å¦è¶…é™ï¼‰
- [ ] TC-C-005: è¶…é™å¤„ç†ï¼ˆé˜»æ­¢æ“ä½œï¼‰
- [ ] TC-C-006: æœˆåº¦é‡ç½®ï¼ˆæ­£ç¡®é‡ç½®ä¸º0ï¼‰
- [ ] TC-C-007: æ¶ˆè´¹å†å²æŸ¥è¯¢

#### 14.1.4 æ¿€æ´»ç 

æµ‹è¯•ç”¨ä¾‹:
- [ ] TC-A-001: æ¿€æ´»ç ç”Ÿæˆï¼ˆæ ¼å¼æ­£ç¡®ï¼‰
- [ ] TC-A-002: æ¿€æ´»ç éªŒè¯ï¼ˆæ ¼å¼éªŒè¯ï¼‰
- [ ] TC-A-003: æ¿€æ´»ç ä½¿ç”¨ï¼ˆæˆåŠŸæ¿€æ´»ï¼‰
- [ ] TC-A-004: é‡å¤ä½¿ç”¨é˜»æ­¢ï¼ˆé»‘åå•æœºåˆ¶ï¼‰
- [ ] TC-A-005: æ— æ•ˆæ¿€æ´»ç æ‹’ç»

#### 14.1.5 ç”¨æˆ·ä¿¡æ¯

æµ‹è¯•ç”¨ä¾‹:
- [ ] TC-U-001: ç”¨æˆ·ä¿¡æ¯åˆ›å»ºï¼ˆé¦–æ¬¡æ³¨å†Œï¼‰
- [ ] TC-U-002: ç”¨æˆ·ä¿¡æ¯æ›´æ–°ï¼ˆæ˜µç§°ã€é‚®ç®±ã€ç®€ä»‹ï¼‰
- [ ] TC-U-003: å¤´åƒä¸Šä¼ ï¼ˆæ”¯æŒçš„æ ¼å¼ï¼‰
- [ ] TC-U-004: å¤´åƒä¸Šä¼ é™åˆ¶ï¼ˆå¤§å°ã€æ ¼å¼ï¼‰
- [ ] TC-U-005: é‚®ç®±æ ¼å¼éªŒè¯
- [ ] TC-U-006: æ˜µç§°é•¿åº¦éªŒè¯
- [ ] TC-U-007: ç®€ä»‹é•¿åº¦éªŒè¯
- [ ] TC-U-008: ç”¨æˆ·ä¿¡æ¯å±•ç¤º

### 14.2 å®‰å…¨æµ‹è¯•

æµ‹è¯•ç”¨ä¾‹:
- [ ] TC-S-001: è®¾å¤‡IDä¼ªé€ æµ‹è¯•ï¼ˆåº”æ— æ³•ä¼ªé€ ï¼‰
- [ ] TC-S-002: æ¿€æ´»ç é‡å¤ä½¿ç”¨æµ‹è¯•ï¼ˆåº”è¢«é˜»æ­¢ï¼‰
- [ ] TC-S-003: æ•°æ®ç¯¡æ”¹æµ‹è¯•ï¼ˆåº”è¢«æ£€æµ‹ï¼‰
- [ ] TC-S-004: æ—¶é—´ç¯¡æ”¹æµ‹è¯•ï¼ˆåº”è¢«æ£€æµ‹ï¼‰
- [ ] TC-S-005: SQLæ³¨å…¥æµ‹è¯•ï¼ˆåº”è¢«é˜²æŠ¤ï¼‰
- [ ] TC-S-006: å¼‚å¸¸æ¶ˆè´¹æ£€æµ‹ï¼ˆåº”è¢«æ ‡è®°ï¼‰

### 14.3 æ€§èƒ½æµ‹è¯•

æµ‹è¯•æŒ‡æ ‡:
- [ ] è®¾å¤‡IDç”Ÿæˆæ€§èƒ½: < 100ms
- [ ] æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½: < 50ms
- [ ] UIå“åº”é€Ÿåº¦: < 200ms
- [ ] å¤§é‡æ¶ˆè´¹è®°å½•å¤„ç†: < 1s (10000æ¡)
- [ ] å†…å­˜å ç”¨: < 200MBï¼ˆå¢é‡ï¼‰

### 14.4 å…¼å®¹æ€§æµ‹è¯•

å¹³å°æµ‹è¯•:
- [ ] macOS 11+ (Big SuråŠä»¥ä¸Š)
- [ ] macOS 12+ (Monterey)
- [ ] macOS 13+ (Ventura)
- [ ] macOS 14+ (Sonoma)
- [ ] Windows 10+
- [ ] Windows 11
- [ ] Ubuntu 20.04+
- [ ] Ubuntu 22.04+

åˆ†è¾¨ç‡æµ‹è¯•:
- [ ] 1920x1080 (Full HD)
- [ ] 2560x1440 (2K)
- [ ] 3840x2160 (4K)
- [ ] 1366x768 (ç¬”è®°æœ¬å¸¸è§åˆ†è¾¨ç‡)

---

## åäº”ã€éƒ¨ç½²ä¸è¿ç»´

### 15.1 éƒ¨ç½²æ–¹æ¡ˆ

#### 15.1.1 æœ¬åœ°éƒ¨ç½²ï¼ˆPhase 1ï¼‰

**å½“å‰æ–¹æ¡ˆ**: å®Œå…¨æœ¬åœ°åŒ–
- âœ… æ•°æ®å­˜å‚¨åœ¨ç”¨æˆ·æœ¬åœ°
- âœ… æ— éœ€æœåŠ¡å™¨
- âœ… æ¿€æ´»ç éªŒè¯æœ¬åœ°åŒ–
- âœ… ç¦»çº¿å¯ç”¨

**éƒ¨ç½²æ­¥éª¤**:
1. ç”¨æˆ·ä¸‹è½½å®‰è£…åŒ…
2. å®‰è£…åˆ°æœ¬åœ°
3. é¦–æ¬¡å¯åŠ¨è‡ªåŠ¨åˆå§‹åŒ–
4. å¼€å§‹ä½¿ç”¨

#### 15.1.2 äº‘ç«¯æœåŠ¡ï¼ˆPhase 2ï¼Œå¯é€‰ï¼‰

**æœªæ¥æ‰©å±•**: äº‘ç«¯è¾…åŠ©
- â³ æ¿€æ´»ç éªŒè¯æœåŠ¡
- â³ é»‘åå•åŒæ­¥æœåŠ¡
- â³ æ•°æ®å¤‡ä»½æœåŠ¡
- â³ è¿è¥æ•°æ®ç»Ÿè®¡

### 15.2 ç›‘æ§

#### 15.2.1 æœ¬åœ°ç›‘æ§

**æ—¥å¿—ç³»ç»Ÿ**:
- åº”ç”¨æ—¥å¿—: `logs/mindvoice_YYYYMMDD.log`
- é”™è¯¯æ—¥å¿—: `logs/errors_YYYYMMDD.log`
- APIæ—¥å¿—: `logs/api_server_YYYYMMDD.log`

**ç›‘æ§å†…å®¹**:
- å¯åŠ¨/å…³é—­äº‹ä»¶
- ä¼šå‘˜æ¿€æ´»äº‹ä»¶
- æ¶ˆè´¹è®°å½•äº‹ä»¶
- å¼‚å¸¸é”™è¯¯äº‹ä»¶

#### 15.2.2 äº‘ç«¯ç›‘æ§ï¼ˆPhase 2ï¼Œå¯é€‰ï¼‰

**æœªæ¥æ‰©å±•**:
- æ¿€æ´»ç ä½¿ç”¨ç»Ÿè®¡
- ä¼šå‘˜åˆ†å¸ƒç»Ÿè®¡
- æ¶ˆè´¹è¶‹åŠ¿åˆ†æ
- å¼‚å¸¸æ£€æµ‹å‘Šè­¦

### 15.3 æ•°æ®å¤‡ä»½

#### 15.3.1 è‡ªåŠ¨å¤‡ä»½

**å¤‡ä»½ç­–ç•¥**:
- âœ… æ¯æ—¥è‡ªåŠ¨å¤‡ä»½
- âœ… ä¿ç•™æœ€è¿‘30å¤©å¤‡ä»½
- âœ… å¤‡ä»½ä½ç½®: `~/Library/Application Support/MindVoice/backups/`

**å¤‡ä»½å†…å®¹**:
- è®¾å¤‡ä¿¡æ¯ (`device.json`)
- ä¼šå‘˜ä¿¡æ¯ (`membership.db`)
- æ¶ˆè´¹è®°å½• (`consumption.db`)

**å®ç°æ–¹å¼**: å®šæ—¶ä»»åŠ¡ï¼ˆæ¯æ—¥å‡Œæ™¨2ç‚¹ï¼‰

#### 15.3.2 æ‰‹åŠ¨å¤‡ä»½ä¸æ•°æ®å¯¼å‡º

**å®Œæ•´å¤‡ä»½**:
- è·¯å¾„: è®¾ç½® â†’ æ•°æ®ç®¡ç† â†’ å¯¼å‡ºå®Œæ•´æ•°æ®
- å¯¼å‡ºæ ¼å¼: ZIPå‹ç¼©åŒ…
- åŒ…å«å†…å®¹:
  - âœ… æ‰€æœ‰æ•°æ®åº“æ–‡ä»¶ï¼ˆhistory.db, membership.db, consumption.dbï¼‰
  - âœ… è®¾å¤‡ä¿¡æ¯ï¼ˆdevice.jsonï¼‰
  - âœ… ç”¨æˆ·ä¿¡æ¯ï¼ˆåŒ…å«å¤´åƒï¼‰
  - âœ… é…ç½®æ–‡ä»¶ï¼ˆä¸å«æ•æ„Ÿä¿¡æ¯å¦‚API Keyï¼‰
  - âœ… æ¿€æ´»ç é»‘åå•
- æ–‡ä»¶å‘½å: `MindVoice_Backup_YYYYMMDD_HHMMSS.zip`

**é€‰æ‹©æ€§å¯¼å‡º**:
- è·¯å¾„: è®¾ç½® â†’ æ•°æ®ç®¡ç† â†’ é€‰æ‹©æ€§å¯¼å‡º
- å¯é€‰é¡¹:
  - ğŸ“ ä»…ä¼šå‘˜ä¿¡æ¯ï¼ˆJSONæ ¼å¼ï¼‰
  - ğŸ“ ä»…æ¶ˆè´¹è®°å½•ï¼ˆCSVæ ¼å¼ï¼Œå¯å¯¼å…¥Excelï¼‰
  - ğŸ“ ä»…ç”¨æˆ·ä¿¡æ¯ï¼ˆJSONæ ¼å¼ï¼‰
  - ğŸ“ å†å²è®°å½•ï¼ˆJSONæˆ–Markdownæ ¼å¼ï¼‰
- ç”¨é€”: æ•°æ®åˆ†æã€è¿ç§»ã€å®¡è®¡

**ç”¨æˆ·ä¿¡æ¯å•ç‹¬å¯¼å‡º** (GDPRåˆè§„):
- è·¯å¾„: è®¾ç½® â†’ ç”¨æˆ·ä¿¡æ¯ â†’ å¯¼å‡ºæˆ‘çš„ä¿¡æ¯
- å¯¼å‡ºæ ¼å¼: JSONï¼ˆæœºå™¨å¯è¯»ï¼‰+ PDFï¼ˆäººç±»å¯è¯»ï¼‰
- åŒ…å«å†…å®¹:
  - ç”¨æˆ·ä¸ªäººä¿¡æ¯ï¼ˆæ˜µç§°ã€é‚®ç®±ã€ç®€ä»‹ï¼‰
  - ä¼šå‘˜ä¿¡æ¯ï¼ˆç­‰çº§ã€æ¿€æ´»æ—¶é—´ã€è¿‡æœŸæ—¶é—´ï¼‰
  - æ¶ˆè´¹ç»Ÿè®¡ï¼ˆæ±‡æ€»æ•°æ®ï¼‰
  - è®¾å¤‡ä¿¡æ¯ï¼ˆè®¾å¤‡IDã€å¹³å°ï¼‰
  - æ•°æ®åˆ›å»ºå’Œä¿®æ”¹æ—¶é—´
- ç”¨é€”: æ»¡è¶³ç”¨æˆ·"æ•°æ®å¯æºå¸¦æƒ"

**æ¢å¤æ“ä½œ**:
- å®Œæ•´æ¢å¤:
  - è®¾ç½® â†’ æ•°æ®ç®¡ç† â†’ å¯¼å…¥æ•°æ®
  - é€‰æ‹©å¤‡ä»½ZIPæ–‡ä»¶
  - è‡ªåŠ¨è¯†åˆ«å¤‡ä»½ç‰ˆæœ¬
  - ç¡®è®¤åè‡ªåŠ¨æ¢å¤æ‰€æœ‰æ•°æ®
- é€‰æ‹©æ€§æ¢å¤:
  - ä»…æ¢å¤ä¼šå‘˜ä¿¡æ¯ï¼ˆé€‚ç”¨äºé‡è£…ç³»ç»Ÿï¼‰
  - ä»…æ¢å¤å†å²è®°å½•ï¼ˆé€‚ç”¨äºæ•°æ®è¿ç§»ï¼‰

**æ•°æ®è¿ç§»å·¥å…·**ï¼ˆè·¨è®¾å¤‡ï¼‰:
- åœºæ™¯: ä»æ—§è®¾å¤‡è¿ç§»åˆ°æ–°è®¾å¤‡
- æ­¥éª¤:
  1. æ—§è®¾å¤‡: å¯¼å‡ºå®Œæ•´æ•°æ®
  2. æ–°è®¾å¤‡: å®‰è£…åº”ç”¨ï¼ˆè‡ªåŠ¨ç”Ÿæˆæ–°è®¾å¤‡IDï¼‰
  3. æ–°è®¾å¤‡: å¯¼å…¥æ•°æ®ï¼ˆä»…å¯¼å…¥ä¼šå‘˜å’Œæ¶ˆè´¹è®°å½•ï¼Œä¸è¦†ç›–è®¾å¤‡IDï¼‰
  4. æ¿€æ´»éªŒè¯: éœ€è¦é‡æ–°æ¿€æ´»ï¼ˆé˜²æ­¢æ»¥ç”¨ï¼‰

---

## åå…­ã€åˆè§„æ€§

### 16.1 éšç§ä¿æŠ¤

#### 16.1.1 æ•°æ®æ”¶é›†

**ç³»ç»Ÿè‡ªåŠ¨æ”¶é›†çš„æ•°æ®**:
- âœ… è®¾å¤‡IDï¼ˆåŒ¿ååŒ–ï¼ŒåŸºäºç¡¬ä»¶å“ˆå¸Œï¼‰
- âœ… æ¶ˆè´¹ç»Ÿè®¡æ•°æ®ï¼ˆæ—¶é•¿ã€tokensï¼‰
- âœ… ä¼šå‘˜ä¿¡æ¯ï¼ˆç­‰çº§ã€è¿‡æœŸæ—¶é—´ï¼‰
- âœ… åº”ç”¨ä½¿ç”¨æ—¥å¿—

**ç”¨æˆ·ä¸»åŠ¨æä¾›çš„æ•°æ®**ï¼ˆå¯é€‰ï¼‰:
- ğŸ“ æ˜µç§°ï¼ˆç”¨æˆ·è‡ªæ„¿å¡«å†™ï¼Œéå¿…éœ€ï¼‰
- ğŸ“ é‚®ç®±åœ°å€ï¼ˆç”¨æˆ·è‡ªæ„¿å¡«å†™ï¼Œéå¿…éœ€ï¼Œç”¨äºè”ç³»å’Œæ‰¾å›ï¼‰
- ğŸ“ ä¸ªäººç®€ä»‹ï¼ˆç”¨æˆ·è‡ªæ„¿å¡«å†™ï¼Œéå¿…éœ€ï¼‰
- ğŸ“ ç”¨æˆ·å¤´åƒï¼ˆç”¨æˆ·è‡ªæ„¿ä¸Šä¼ ï¼Œéå¿…éœ€ï¼‰

**é‡è¦è¯´æ˜**:
- âœ… ç”¨æˆ·ä¿¡æ¯å®Œå…¨ç”±ç”¨æˆ·ä¸»åŠ¨å¡«å†™ï¼Œç³»ç»Ÿä¸å¼ºåˆ¶è¦æ±‚
- âœ… æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åœ¨æœ¬åœ°ï¼Œç”¨æˆ·å®Œå…¨æ§åˆ¶
- âœ… Phase 1 ä¸ä¸Šä¼ åˆ°äº‘ç«¯ï¼ŒPhase 2 äº‘ç«¯åŒæ­¥éœ€ç”¨æˆ·æ˜ç¡®æˆæƒ

**ä¸ä¸»åŠ¨æ”¶é›†**:
- âŒ å½•éŸ³å†…å®¹ï¼ˆä»…æœ¬åœ°ä¸´æ—¶å¤„ç†ï¼Œä¸ä¿å­˜ï¼‰
- âŒ èŠå¤©å†…å®¹ï¼ˆä»…æœ¬åœ°æ˜¾ç¤ºï¼Œmetadataä¸­å¯é€‰ä¿å­˜ï¼‰
- âŒ åœ°ç†ä½ç½®
- âŒ æµè§ˆè®°å½•
- âŒ é€šè®¯å½•
- âŒ ç³»ç»Ÿå¯†ç æˆ–å…¶ä»–æ•æ„Ÿä¿¡æ¯

**ç”¨æˆ·æƒåˆ©**:
- âœ… ç”¨æˆ·å¯éšæ—¶æŸ¥çœ‹æ‰€æœ‰æ”¶é›†çš„æ•°æ®
- âœ… ç”¨æˆ·å¯éšæ—¶ä¿®æ”¹æˆ–åˆ é™¤ä¸ªäººä¿¡æ¯
- âœ… ç”¨æˆ·å¯å¯¼å‡ºæ‰€æœ‰æ•°æ®ï¼ˆJSON/CSVæ ¼å¼ï¼‰
- âœ… ç”¨æˆ·å¯å®Œå…¨åˆ é™¤æ‰€æœ‰æ•°æ®ï¼ˆå¸è½½æ—¶æä¾›é€‰é¡¹ï¼‰
- âœ… ç”¨æˆ·å¯é€‰æ‹©æ˜¯å¦å‚ä¸åŒ¿åç»Ÿè®¡ï¼ˆå¸®åŠ©æ”¹è¿›äº§å“ï¼‰

#### 16.1.2 æ•°æ®å­˜å‚¨

**å­˜å‚¨åŸåˆ™**:
- âœ… æœ¬åœ°å­˜å‚¨ä¸ºä¸»ï¼ˆPhase 1 å®Œå…¨æœ¬åœ°åŒ–ï¼‰
- âœ… åŠ å¯†æ•æ„Ÿæ•°æ®ï¼ˆæ¿€æ´»ç é»‘åå•ã€ç”¨æˆ·è‡ªå¤‡æ¨¡å‹çš„API Keyï¼‰
- âœ… ç”¨æˆ·å®Œå…¨æ§åˆ¶ï¼ˆç”¨æˆ·æ‹¥æœ‰æ‰€æœ‰æ•°æ®çš„å®Œå…¨æ§åˆ¶æƒï¼‰
- âœ… å¸è½½åå¯é€‰æ‹©åˆ é™¤æˆ–ä¿ç•™

**æ•°æ®åˆ†ç±»å­˜å‚¨**:
- ğŸ”’ **é«˜æ•æ„Ÿ**: ç”¨æˆ·è‡ªå¤‡æ¨¡å‹çš„API Keyï¼ˆAES-256åŠ å¯†ï¼‰
- ğŸ” **ä¸­æ•æ„Ÿ**: æ¿€æ´»ç é»‘åå•ã€ä¼šå‘˜ä¿¡æ¯ï¼ˆæ–‡ä»¶æƒé™ä¿æŠ¤ï¼‰
- ğŸ“ **æ™®é€š**: æ¶ˆè´¹è®°å½•ã€è®¾å¤‡ä¿¡æ¯ï¼ˆæ ‡å‡†å­˜å‚¨ï¼‰
- ğŸ“ **ç”¨æˆ·æ•°æ®**: æ˜µç§°ã€é‚®ç®±ã€å¤´åƒï¼ˆç”¨æˆ·å®Œå…¨æ§åˆ¶ï¼Œå¯éšæ—¶åˆ æ”¹ï¼‰

**æ•°æ®å®‰å…¨æªæ–½**:
- âœ… æ–‡ä»¶æƒé™æ§åˆ¶ï¼ˆchmod 600ï¼Œä»…ç”¨æˆ·å¯è®¿é—®ï¼‰
- âœ… æ•°æ®åº“è®¿é—®æ§åˆ¶ï¼ˆæœ¬åœ°SQLiteï¼Œæ— è¿œç¨‹è®¿é—®ï¼‰
- âœ… æ•æ„Ÿä¿¡æ¯åŠ å¯†å­˜å‚¨ï¼ˆAES-256ï¼‰
- âœ… å®šæœŸè‡ªåŠ¨å¤‡ä»½ï¼ˆæ¯æ—¥ï¼Œä¿ç•™30å¤©ï¼‰
- âœ… å¤´åƒå›¾ç‰‡éš”ç¦»å­˜å‚¨ï¼ˆç‹¬ç«‹ç›®å½•ï¼Œé˜²æ­¢è·¯å¾„éå†ï¼‰
- âœ… ç”¨æˆ·è‡ªå¤‡API Keyä¸è®°å½•æ—¥å¿—ï¼ˆé˜²æ­¢æ³„éœ²ï¼‰

#### 16.1.3 éšç§æ”¿ç­–

**æ”¿ç­–å†…å®¹** (éœ€è¦æ³•åŠ¡å®¡æ ¸):
1. **æ•°æ®æ”¶é›†è¯´æ˜**
   - ç³»ç»Ÿè‡ªåŠ¨æ”¶é›†çš„æ•°æ®åŠç”¨é€”
   - ç”¨æˆ·ä¸»åŠ¨æä¾›çš„æ•°æ®ï¼ˆå¯é€‰ï¼‰
   - ä¸æ”¶é›†çš„æ•°æ®æ¸…å•
2. **æ•°æ®ä½¿ç”¨è¯´æ˜**
   - è®¾å¤‡è¯†åˆ«å’Œä¼šå‘˜ç®¡ç†
   - æ¶ˆè´¹ç»Ÿè®¡å’Œé¢åº¦ç®¡ç†
   - ç”¨æˆ·ä¿¡æ¯ä»…ç”¨äºå±•ç¤ºå’ŒæœåŠ¡æ”¹è¿›
   - ä¸ç”¨äºå¹¿å‘ŠæŠ•æ”¾æˆ–ç¬¬ä¸‰æ–¹å…±äº«
3. **æ•°æ®ä¿æŠ¤æªæ–½**
   - æœ¬åœ°å­˜å‚¨ï¼ŒåŠ å¯†ä¿æŠ¤
   - æ–‡ä»¶æƒé™æ§åˆ¶
   - å®šæœŸå¤‡ä»½æœºåˆ¶
4. **ç”¨æˆ·æƒåˆ©**
   - æŸ¥çœ‹ã€ä¿®æ”¹ã€åˆ é™¤ä¸ªäººä¿¡æ¯çš„æƒåˆ©
   - å¯¼å‡ºæ•°æ®çš„æƒåˆ©
   - æ‹’ç»åŒ¿åç»Ÿè®¡çš„æƒåˆ©
   - æ’¤å›æˆæƒçš„æƒåˆ©ï¼ˆPhase 2 äº‘ç«¯åŒæ­¥ï¼‰
5. **æ•°æ®ä¿ç•™æœŸé™**
   - æœ¬åœ°æ•°æ®ï¼šç”¨æˆ·ä¸»åŠ¨åˆ é™¤æˆ–å¸è½½æ—¶åˆ é™¤
   - å¤‡ä»½æ•°æ®ï¼šä¿ç•™30å¤©
   - ç”¨æˆ·ä¿¡æ¯ï¼šç”¨æˆ·å¯éšæ—¶åˆ é™¤
6. **å„¿ç«¥éšç§ä¿æŠ¤**
   - ä¸ä¸»åŠ¨æ”¶é›†13å²ä»¥ä¸‹å„¿ç«¥çš„ä¸ªäººä¿¡æ¯
   - å¦‚å‘ç°ï¼Œç«‹å³åˆ é™¤
7. **æ”¿ç­–å˜æ›´é€šçŸ¥**
   - é‡å¤§å˜æ›´æå‰30å¤©é€šçŸ¥
   - åº”ç”¨å†…å¼¹çª—æç¤º
8. **è”ç³»æ–¹å¼**
   - éšç§é—®é¢˜å’¨è¯¢ï¼šprivacy@mindvoice.com
   - æ•°æ®åˆ é™¤è¯·æ±‚ï¼šdpo@mindvoice.com

**å±•ç¤ºä½ç½®**:
- é¦–æ¬¡å®‰è£…æ—¶å±•ç¤ºï¼ˆå‹¾é€‰åŒæ„åç»§ç»­ï¼‰
- è®¾ç½® â†’ å…³äº â†’ éšç§æ”¿ç­–ï¼ˆéšæ—¶æŸ¥çœ‹ï¼‰
- å®˜ç½‘æä¾›å®Œæ•´ç‰ˆæœ¬ï¼ˆå¯ä¸‹è½½PDFï¼‰
- åº”ç”¨å†…æä¾›"ç”¨æˆ·ä¿¡æ¯è¯´æ˜"å¿«æ·å…¥å£

**ç”¨æˆ·ä¿¡æ¯ç®¡ç†é€æ˜åŒ–**:
- âœ… ç”¨æˆ·ä¿¡æ¯è®¾ç½®ç•Œé¢æ˜ç¡®æ ‡æ³¨"å¯é€‰"
- âœ… æä¾›"ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªä¿¡æ¯"çš„è¯´æ˜
- âœ… æä¾›"ä¸€é”®æ¸…é™¤æ‰€æœ‰ä¸ªäººä¿¡æ¯"æŒ‰é’®
- âœ… é‚®ç®±éªŒè¯é‡‡ç”¨å¯é€‰æœºåˆ¶ï¼ˆæé«˜æ‰¾å›æˆåŠŸç‡ï¼‰

### 16.2 ç”¨æˆ·åè®®

#### 16.2.1 æœåŠ¡æ¡æ¬¾

**æ ¸å¿ƒå†…å®¹**:
1. **æœåŠ¡è¯´æ˜**: ä¼šå‘˜æƒç›Šã€é¢åº¦è§„åˆ™
2. **ä½¿ç”¨è§„èŒƒ**: ç¦æ­¢è¡Œä¸ºã€è¿è§„å¤„ç†
3. **é€€æ¬¾æ”¿ç­–**: 
   - æ¿€æ´»ç æœªä½¿ç”¨å¯é€€æ¬¾
   - å·²æ¿€æ´»ä¸å¯é€€æ¬¾
   - ç‰¹æ®Šæƒ…å†µåå•†å¤„ç†
4. **è´£ä»»é™åˆ¶**: æœåŠ¡ä¸­æ–­ã€æ•°æ®ä¸¢å¤±ç­‰
5. **åè®®å˜æ›´**: æå‰30å¤©é€šçŸ¥

#### 16.2.2 å…è´£å£°æ˜

**å…è´£å†…å®¹**:
1. **æœåŠ¡å¯ç”¨æ€§**: å°½åŠ›ä¿è¯ä½†ä¸ä¿è¯100%å¯ç”¨
2. **æ•°æ®å‡†ç¡®æ€§**: ASR/LLMç»“æœä»…ä¾›å‚è€ƒ
3. **ç¬¬ä¸‰æ–¹æœåŠ¡**: ç«å±±å¼•æ“ASRã€LiteLLMç­‰
4. **ä¸å¯æŠ—åŠ›**: ç½‘ç»œæ•…éšœã€ç¡¬ä»¶æ•…éšœç­‰

---

## åä¸ƒã€æœªæ¥æ‰©å±•

### 17.1 äº‘ç«¯åŒæ­¥ï¼ˆPhase 2ï¼‰

**åŠŸèƒ½è§„åˆ’**:
- â³ å¤šè®¾å¤‡å…±äº«ä¼šå‘˜ï¼ˆåŒä¸€è´¦å·å¤šè®¾å¤‡ï¼‰
- â³ äº‘ç«¯æ•°æ®å¤‡ä»½ï¼ˆè‡ªåŠ¨åŒæ­¥ï¼‰
- â³ è·¨å¹³å°ä½¿ç”¨ï¼ˆmacOSã€Windowsã€Linuxï¼‰
- â³ ç§»åŠ¨ç«¯æ”¯æŒï¼ˆiOSã€Androidï¼‰

**æŠ€æœ¯æ–¹æ¡ˆ**:
- ç”¨æˆ·è´¦å·ä½“ç³»ï¼ˆé‚®ç®±/æ‰‹æœºå·æ³¨å†Œï¼‰
- äº‘ç«¯æ•°æ®åº“ï¼ˆPostgreSQLï¼‰
- åŒæ­¥æœåŠ¡ï¼ˆREST APIï¼‰
- OAuth2è®¤è¯

### 17.2 æ¨å¹¿ç³»ç»Ÿï¼ˆPhase 2ï¼‰

**åŠŸèƒ½è§„åˆ’**:
- â³ æ¨èç æœºåˆ¶ï¼ˆæ¨èå¥½å‹è·å¾—å¥–åŠ±ï¼‰
- â³ æ¨èå¥–åŠ±ï¼ˆèµ é€é¢åº¦/å»¶é•¿ä¼šå‘˜ï¼‰
- â³ å›¢é˜Ÿè®¢é˜…ï¼ˆä¼ä¸šæ‰¹é‡è´­ä¹°ï¼‰
- â³ åˆ†é”€ç³»ç»Ÿï¼ˆåˆä½œä¼™ä¼´ï¼‰

**å¥–åŠ±è§„åˆ™**:
- æ¨è1äºº: èµ é€1å¤©VIP
- æ¨è5äºº: èµ é€1å‘¨VIP
- æ¨è10äºº: èµ é€1æœˆVIP

### 17.3 ä¼ä¸šç‰ˆï¼ˆPhase 3ï¼‰

**åŠŸèƒ½è§„åˆ’**:
- â³ ä¼ä¸šè´¦æˆ·ç®¡ç†ï¼ˆå¤šç”¨æˆ·ç®¡ç†ï¼‰
- â³ ç»Ÿä¸€è®¡è´¹ï¼ˆä¼ä¸šç»Ÿä¸€ä»˜è´¹ï¼‰
- â³ ä½¿ç”¨æŠ¥è¡¨ï¼ˆç®¡ç†å‘˜æŸ¥çœ‹å›¢é˜Ÿä½¿ç”¨æƒ…å†µï¼‰
- â³ ä¼ä¸šé¢åº¦æ± ï¼ˆå…±äº«é¢åº¦ï¼Œçµæ´»åˆ†é…ï¼‰

**å®šä»·æ¨¡å¼**:
- æŒ‰ç”¨æˆ·æ•°è®¡è´¹
- ä¼ä¸šé¢åº¦æ± ï¼ˆå…±äº«ï¼‰
- ä¸“å±å®¢æˆ·ç»ç†
- SLAä¿éšœ

### 17.4 å¢å€¼æœåŠ¡ï¼ˆPhase 3ï¼‰

**æœåŠ¡å†…å®¹**:
- â³ è‡ªå®šä¹‰æ¨¡å‹è®­ç»ƒï¼ˆé’ˆå¯¹ç‰¹å®šé¢†åŸŸï¼‰
- â³ ä¸“ä¸šæ•°æ®åˆ†æï¼ˆä½¿ç”¨æŠ¥å‘Šã€ä¼˜åŒ–å»ºè®®ï¼‰
- â³ å®šåˆ¶åŒ–éƒ¨ç½²ï¼ˆç§æœ‰åŒ–éƒ¨ç½²ï¼‰
- â³ æŠ€æœ¯å’¨è¯¢æœåŠ¡ï¼ˆé›†æˆæ”¯æŒï¼‰
- â³ ç™½æ ‡æœåŠ¡ï¼ˆå“ç‰Œå®šåˆ¶ï¼‰

---

## é™„å½•

### A. é…ç½®ç¤ºä¾‹

#### A.1 ä¼šå‘˜é…ç½®ï¼ˆæ–°å¢åˆ° config.ymlï¼‰

```yaml
# ä¼šå‘˜ä½“ç³»é…ç½®
membership:
  # é»˜è®¤ä¼šå‘˜ç­‰çº§ï¼ˆæ°¸ä¹…æœ‰æ•ˆï¼‰
  default_tier: free
  
  # å…è´¹ä¼šå‘˜è®¾ç½®
  free_permanent: true  # å…è´¹ä¼šå‘˜æ°¸ä¹…æœ‰æ•ˆ
  
  # ä¼šå‘˜é¢åº¦é…ç½®ï¼ˆå•ä½ï¼šASRä¸ºæ¯«ç§’ï¼ŒLLMä¸ºtokensï¼‰
  quotas:
    free:
      asr_duration_ms_monthly: 3600000        # 1å°æ—¶ = 60*60*1000ms
      llm_tokens_monthly: 100000               # 10ä¸‡tokens
    vip:
      asr_duration_ms_monthly: 36000000       # 10å°æ—¶
      llm_tokens_monthly: 1000000              # 100ä¸‡tokens
    pro:
      asr_duration_ms_monthly: 180000000      # 50å°æ—¶
      llm_tokens_monthly: 5000000              # 500ä¸‡tokens
    pro_plus:
      asr_duration_ms_monthly: 720000000      # 200å°æ—¶
      llm_tokens_monthly: 20000000             # 2000ä¸‡tokens
  
  # è®¢é˜…å‘¨æœŸé…ç½®
  subscription_periods:
    - months: 1
      name: "1ä¸ªæœˆ"
      discount: 0
    - months: 3
      name: "3ä¸ªæœˆ"
      discount: 0.1    # 9æŠ˜
    - months: 6
      name: "6ä¸ªæœˆ"
      discount: 0.15   # 85æŠ˜
    - months: 12
      name: "å¹´ä»˜"
      discount: 0.2    # 8æŠ˜
  
  # è®¢é˜…å‘¨æœŸé™åˆ¶
  period_limits:
    min_months: 1
    max_months: 120    # æœ€å¤š10å¹´
  
  # è¿‡æœŸæé†’é…ç½®
  expiration_reminders:
    days_before: [7, 3, 1]
  
  # è‡ªåŠ¨é™çº§é…ç½®
  auto_downgrade:
    enabled: true
    downgrade_to: free
    default_period: 1

# ç”¨æˆ·ä¿¡æ¯é…ç½®
user_profile:
  # å¤´åƒé…ç½®
  avatar:
    max_size_mb: 5  # æœ€å¤§æ–‡ä»¶å¤§å°ï¼ˆMBï¼‰
    allowed_formats: ['png', 'jpg', 'jpeg']  # å…è®¸çš„æ ¼å¼
    storage_path: 'avatars'  # å­˜å‚¨ç›®å½•ï¼ˆç›¸å¯¹äºdata_dirï¼‰
  
  # å­—æ®µé™åˆ¶
  limits:
    nickname_max_length: 50
    bio_max_length: 500
    email_required: false  # æ˜¯å¦å¿…å¡«

# æ¨¡å‹é…ç½®
llm:
  # æ¨¡å‹æ¥æºç±»å‹
  model_source_type: 'vendor'  # 'vendor' æˆ– 'user'
  
  # å‚å•†æä¾›çš„æ¨¡å‹ï¼ˆè®¡å…¥ä¼šå‘˜é¢åº¦ï¼‰
  vendor_models:
    enabled: true
    default_model: 'gpt-4'
    api_key: ''  # ç”±ç³»ç»Ÿç®¡ç†
  
  # ç”¨æˆ·è‡ªå¤‡æ¨¡å‹ï¼ˆä¸è®¡å…¥ä¼šå‘˜é¢åº¦ï¼‰
  user_models:
    enabled: true
    allow_custom: true  # æ˜¯å¦å…è®¸ç”¨æˆ·é…ç½®è‡ªå·±çš„æ¨¡å‹
    supported_providers:
      - openai
      - anthropic
      - deepseek
      - moonshot
    # ç”¨æˆ·é…ç½®ç¤ºä¾‹ï¼ˆå­˜å‚¨åœ¨ç”¨æˆ·æœ¬åœ°é…ç½®ï¼‰
    # custom_api_key: ''  # ç”¨æˆ·è‡ªå·±çš„ API Key
    # custom_model: 'gpt-4'
    # custom_base_url: ''  # å¯é€‰çš„è‡ªå®šä¹‰ç«¯ç‚¹
```

### B. APIæ¥å£æ±‡æ€»

#### B.1 è®¾å¤‡ç®¡ç†

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|-----|------|------|
| GET | /api/device/info | è·å–è®¾å¤‡ä¿¡æ¯ |
| POST | /api/device/register | æ³¨å†Œæ–°è®¾å¤‡ |

#### B.2 ä¼šå‘˜ç®¡ç†

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|-----|------|------|
| GET | /api/membership/info | è·å–ä¼šå‘˜ä¿¡æ¯ |
| POST | /api/membership/activate | æ¿€æ´»ä¼šå‘˜ |
| POST | /api/membership/renew | ç»­è´¹ä¼šå‘˜ |
| POST | /api/membership/upgrade | å‡çº§ä¼šå‘˜ |

#### B.3 æ¶ˆè´¹ç»Ÿè®¡

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|-----|------|------|
| GET | /api/consumption/current | è·å–å½“æœˆæ¶ˆè´¹ |
| GET | /api/consumption/history | è·å–å†å²æ¶ˆè´¹ |
| POST | /api/quota/check | æ£€æŸ¥é¢åº¦ |

#### B.4 æ¿€æ´»ç 

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|-----|------|------|
| POST | /api/activation/validate | éªŒè¯æ¿€æ´»ç  |

#### B.5 ç”¨æˆ·ä¿¡æ¯

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|-----|------|------|
| GET | /api/user/profile | è·å–ç”¨æˆ·ä¿¡æ¯ |
| PUT | /api/user/profile | æ›´æ–°ç”¨æˆ·ä¿¡æ¯ |
| POST | /api/user/avatar | ä¸Šä¼ ç”¨æˆ·å¤´åƒ |
| GET | /api/avatars/{filename} | è·å–ç”¨æˆ·å¤´åƒ |

#### B.6 æ¨¡å‹é…ç½®

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|-----|------|------|
| GET | /api/model/config | è·å–å½“å‰æ¨¡å‹é…ç½® |
| PUT | /api/model/config | æ›´æ–°æ¨¡å‹é…ç½® |
| POST | /api/model/test | æµ‹è¯•æ¨¡å‹è¿æ¥ |

### C. æ•°æ®åº“è¡¨å…³ç³»

```
devices (è®¾å¤‡è¡¨)
    â†“ 1:1
    â”œâ”€ memberships (ä¼šå‘˜è¡¨)
    â”‚   â†“ 1:N
    â”‚   consumption_records (æ¶ˆè´¹è®°å½•è¡¨)
    â”‚       â†“ N:1
    â”‚       monthly_consumption (æœˆåº¦æ±‡æ€»è¡¨)
    â”‚
    â”œâ”€ user_profiles (ç”¨æˆ·ä¿¡æ¯è¡¨)
    â”‚
    â””â”€ membership_history (ä¼šå‘˜å†å²è¡¨, 1:N)
```

### D. é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ | å¤„ç†å»ºè®® |
|-------|------|---------|
| E001 | è®¾å¤‡IDç”Ÿæˆå¤±è´¥ | æ£€æŸ¥ç¡¬ä»¶ä¿¡æ¯è·å– |
| E002 | ä¼šå‘˜ä¿¡æ¯ä¸å­˜åœ¨ | é‡æ–°æ³¨å†Œ |
| E003 | æ¿€æ´»ç æ ¼å¼é”™è¯¯ | æ£€æŸ¥æ¿€æ´»ç æ ¼å¼ |
| E004 | æ¿€æ´»ç å·²ä½¿ç”¨ | è”ç³»å®¢æœ |
| E005 | æ¿€æ´»ç æ— æ•ˆ | è”ç³»å®¢æœ |
| E006 | é¢åº¦ä¸è¶³ | å‡çº§ä¼šå‘˜æˆ–ç­‰å¾…é‡ç½® |
| E007 | ä¼šå‘˜å·²è¿‡æœŸ | ç»­è´¹ |
| E008 | æ•°æ®åº“é”™è¯¯ | æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶ |

### E. å‚è€ƒèµ„æ–™

**å®˜æ–¹æ–‡æ¡£**:
- [Electron æ–‡æ¡£](https://www.electronjs.org/docs)
- [FastAPI æ–‡æ¡£](https://fastapi.tiangolo.com/)
- [SQLite æ–‡æ¡£](https://www.sqlite.org/docs.html)
- [React æ–‡æ¡£](https://react.dev/)

**æŠ€æœ¯å‚è€ƒ**:
- [Electron IPC é€šä¿¡](https://www.electronjs.org/docs/latest/tutorial/ipc)
- [Python APScheduler](https://apscheduler.readthedocs.io/)
- [SQLAlchemy ORM](https://docs.sqlalchemy.org/)

**å®‰å…¨å‚è€ƒ**:
- [OWASP Top 10](https://owasp.org/www-project-top-ten/)
- [Node.js å®‰å…¨æœ€ä½³å®è·µ](https://nodejs.org/en/docs/guides/security/)

### F. è”ç³»æ–¹å¼

**é¡¹ç›®ç›¸å…³**:
- å¼€å‘è€…ï¼šæ·±åœ³ç‹å“¥ & AI
- é‚®ç®±ï¼šmanwjh@126.com
- GitHub: [MindVoice](https://github.com/mindvoice/mindvoice)

**å®¢æœæ”¯æŒ**:
- æŠ€æœ¯æ”¯æŒï¼štech@mindvoice.com
- å•†åŠ¡åˆä½œï¼šbusiness@mindvoice.com
- å®¢æœé‚®ç®±ï¼šsupport@mindvoice.com
- å®¢æœå¾®ä¿¡ï¼šMindVoice-Support

---

## v1.1 ç‰ˆæœ¬æ›´æ–°æ€»ç»“

### ğŸ” å‘ç°çš„é—®é¢˜

1. **éšç§ä¿æŠ¤ç« èŠ‚çŸ›ç›¾**: 
   - **é—®é¢˜**: åŸæ–‡æ¡£åœ¨16.1.1èŠ‚è¯´"ä¸æ”¶é›†ä¸ªäººèº«ä»½ä¿¡æ¯ï¼ˆé‚®ç®±ã€ç”µè¯ï¼‰"ï¼Œä½†å®é™…è®¾è®¡äº†ç”¨æˆ·ä¿¡æ¯è¡¨ï¼Œæ”¯æŒç”¨æˆ·å¡«å†™æ˜µç§°ã€é‚®ç®±ç­‰
   - **å½±å“**: å¯èƒ½å¯¼è‡´ç”¨æˆ·è¯¯è§£ï¼Œä¹Ÿä¸ç¬¦åˆå®é™…åŠŸèƒ½è®¾è®¡
   - **ä¿®æ­£**: æ˜ç¡®åŒºåˆ†"ç³»ç»Ÿè‡ªåŠ¨æ”¶é›†"å’Œ"ç”¨æˆ·ä¸»åŠ¨æä¾›"çš„æ•°æ®

2. **æ•°æ®å®‰å…¨è¯´æ˜ä¸å¤Ÿè¯¦ç»†**:
   - **é—®é¢˜**: æœªæ˜ç¡®ä¸åŒæ•æ„Ÿçº§åˆ«çš„æ•°æ®å¦‚ä½•åˆ†ç±»å­˜å‚¨å’Œä¿æŠ¤
   - **å½±å“**: å®æ–½æ—¶å¯èƒ½å¯¹å®‰å…¨æªæ–½ç†è§£ä¸è¶³
   - **ä¿®æ­£**: æ·»åŠ æ•°æ®åˆ†ç±»å­˜å‚¨è¯´æ˜ï¼ˆé«˜æ•æ„Ÿ/ä¸­æ•æ„Ÿ/æ™®é€š/ç”¨æˆ·æ•°æ®ï¼‰

3. **ç¼ºå°‘æ•°æ®å¯¼å‡ºè¯¦ç»†è¯´æ˜**:
   - **é—®é¢˜**: ä»…ç®€å•æåˆ°"å¯¼å‡ºæ•°æ®"ï¼Œæœªè¯¦ç»†è¯´æ˜æ ¼å¼å’Œå†…å®¹
   - **å½±å“**: ä¸ç¬¦åˆGDPR"æ•°æ®å¯æºå¸¦æƒ"è¦æ±‚
   - **ä¿®æ­£**: æ·»åŠ å®Œæ•´å¤‡ä»½ã€é€‰æ‹©æ€§å¯¼å‡ºã€ç”¨æˆ·ä¿¡æ¯å•ç‹¬å¯¼å‡ºç­‰è¯¦ç»†è¯´æ˜

4. **ç¼ºå°‘å®æ–½å‰æ£€æŸ¥æ¸…å•**:
   - **é—®é¢˜**: è§„åˆ’è™½ç„¶è¯¦ç»†ï¼Œä½†ç¼ºå°‘ä¸€ä¸ªç³»ç»ŸåŒ–çš„å®æ–½æ£€æŸ¥æ¸…å•
   - **å½±å“**: å®æ–½æ—¶å¯èƒ½é—æ¼å…³é”®ç‚¹
   - **ä¿®æ­£**: æ·»åŠ 200+é¡¹æ£€æŸ¥æ¸…å•ï¼Œè¦†ç›–æ‰€æœ‰å…³é”®ç¯èŠ‚

### âœ… ä¸»è¦æ”¹è¿›

#### 1. éšç§ä¿æŠ¤ç« èŠ‚ï¼ˆ16.1ï¼‰

**æ”¹è¿›å‰**:
```
**ä¸æ”¶é›†**:
- âŒ ä¸ªäººèº«ä»½ä¿¡æ¯ï¼ˆå§“åã€é‚®ç®±ã€ç”µè¯ï¼‰
```

**æ”¹è¿›å**:
```
**ç³»ç»Ÿè‡ªåŠ¨æ”¶é›†çš„æ•°æ®**: ï¼ˆè®¾å¤‡IDã€æ¶ˆè´¹ç»Ÿè®¡ç­‰ï¼‰

**ç”¨æˆ·ä¸»åŠ¨æä¾›çš„æ•°æ®**ï¼ˆå¯é€‰ï¼‰:
- ğŸ“ æ˜µç§°ï¼ˆç”¨æˆ·è‡ªæ„¿å¡«å†™ï¼Œéå¿…éœ€ï¼‰
- ğŸ“ é‚®ç®±åœ°å€ï¼ˆç”¨æˆ·è‡ªæ„¿å¡«å†™ï¼Œéå¿…éœ€ï¼‰
- ğŸ“ ä¸ªäººç®€ä»‹ï¼ˆç”¨æˆ·è‡ªæ„¿å¡«å†™ï¼Œéå¿…éœ€ï¼‰
- ğŸ“ ç”¨æˆ·å¤´åƒï¼ˆç”¨æˆ·è‡ªæ„¿ä¸Šä¼ ï¼Œéå¿…éœ€ï¼‰

**é‡è¦è¯´æ˜**:
- âœ… ç”¨æˆ·ä¿¡æ¯å®Œå…¨ç”±ç”¨æˆ·ä¸»åŠ¨å¡«å†™ï¼Œç³»ç»Ÿä¸å¼ºåˆ¶è¦æ±‚
- âœ… æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åœ¨æœ¬åœ°ï¼Œç”¨æˆ·å®Œå…¨æ§åˆ¶
- âœ… Phase 1 ä¸ä¸Šä¼ åˆ°äº‘ç«¯
```

**ä»·å€¼**: 
- âœ… æ¶ˆé™¤äº†æ–‡æ¡£å†…éƒ¨çŸ›ç›¾
- âœ… æ˜ç¡®äº†ç”¨æˆ·ä¿¡æ¯æ˜¯"å¯é€‰"è€Œé"å¼ºåˆ¶"
- âœ… ç¬¦åˆå®é™…åŠŸèƒ½è®¾è®¡

#### 2. æ•°æ®å®‰å…¨è¯´æ˜ï¼ˆ16.1.2ï¼‰

**æ–°å¢å†…å®¹**:
```
**æ•°æ®åˆ†ç±»å­˜å‚¨**:
- ğŸ”’ é«˜æ•æ„Ÿ: ç”¨æˆ·è‡ªå¤‡æ¨¡å‹çš„API Keyï¼ˆAES-256åŠ å¯†ï¼‰
- ğŸ” ä¸­æ•æ„Ÿ: æ¿€æ´»ç é»‘åå•ã€ä¼šå‘˜ä¿¡æ¯ï¼ˆæ–‡ä»¶æƒé™ä¿æŠ¤ï¼‰
- ğŸ“ æ™®é€š: æ¶ˆè´¹è®°å½•ã€è®¾å¤‡ä¿¡æ¯ï¼ˆæ ‡å‡†å­˜å‚¨ï¼‰
- ğŸ“ ç”¨æˆ·æ•°æ®: æ˜µç§°ã€é‚®ç®±ã€å¤´åƒï¼ˆç”¨æˆ·å®Œå…¨æ§åˆ¶ï¼‰

**æ•°æ®å®‰å…¨æªæ–½**:
- âœ… æ–‡ä»¶æƒé™æ§åˆ¶ï¼ˆchmod 600ï¼‰
- âœ… æ•æ„Ÿä¿¡æ¯åŠ å¯†å­˜å‚¨ï¼ˆAES-256ï¼‰
- âœ… å¤´åƒå›¾ç‰‡éš”ç¦»å­˜å‚¨ï¼ˆé˜²æ­¢è·¯å¾„éå†ï¼‰
- âœ… ç”¨æˆ·è‡ªå¤‡API Keyä¸è®°å½•æ—¥å¿—ï¼ˆé˜²æ­¢æ³„éœ²ï¼‰
```

**ä»·å€¼**:
- âœ… æ˜ç¡®äº†ä¸åŒæ•°æ®çš„å®‰å…¨çº§åˆ«
- âœ… æä¾›äº†å…·ä½“çš„ä¿æŠ¤æªæ–½
- âœ… ç‰¹åˆ«æ³¨æ„API Keyç­‰é«˜æ•æ„Ÿä¿¡æ¯

#### 3. éšç§æ”¿ç­–å®Œå–„ï¼ˆ16.1.3ï¼‰

**æ–°å¢å†…å®¹**:
- æ•°æ®ä½¿ç”¨è¯´æ˜ï¼ˆä¸ç”¨äºå¹¿å‘Šæˆ–ç¬¬ä¸‰æ–¹å…±äº«ï¼‰
- ç”¨æˆ·æƒåˆ©ï¼ˆæŸ¥çœ‹ã€ä¿®æ”¹ã€åˆ é™¤ã€å¯¼å‡ºã€æ’¤å›æˆæƒï¼‰
- å„¿ç«¥éšç§ä¿æŠ¤ï¼ˆ13å²ä»¥ä¸‹ï¼‰
- æ”¿ç­–å˜æ›´é€šçŸ¥æœºåˆ¶
- ç”¨æˆ·ä¿¡æ¯ç®¡ç†é€æ˜åŒ–æªæ–½

**ä»·å€¼**:
- âœ… ç¬¦åˆGDPRæ ¸å¿ƒç†å¿µ
- âœ… ä¿æŠ¤å„¿ç«¥éšç§
- âœ… æé«˜é€æ˜åº¦

#### 4. æ•°æ®å¯¼å‡ºåŠŸèƒ½ï¼ˆ15.3.2ï¼‰

**æ–°å¢å†…å®¹**:
```
**å®Œæ•´å¤‡ä»½**: ZIPæ ¼å¼ï¼ŒåŒ…å«æ‰€æœ‰æ•°æ®
**é€‰æ‹©æ€§å¯¼å‡º**: ä¼šå‘˜ä¿¡æ¯ã€æ¶ˆè´¹è®°å½•ã€ç”¨æˆ·ä¿¡æ¯ã€å†å²è®°å½•
**ç”¨æˆ·ä¿¡æ¯å•ç‹¬å¯¼å‡º**: JSON + PDFæ ¼å¼ï¼ˆGDPRåˆè§„ï¼‰
**æ•°æ®è¿ç§»å·¥å…·**: è·¨è®¾å¤‡è¿ç§»æ–¹æ¡ˆ
```

**ä»·å€¼**:
- âœ… æ»¡è¶³"æ•°æ®å¯æºå¸¦æƒ"
- âœ… æä¾›å¤šç§å¯¼å‡ºæ ¼å¼
- âœ… æ”¯æŒè·¨è®¾å¤‡è¿ç§»

#### 5. å®æ–½å‰æ£€æŸ¥æ¸…å•ï¼ˆæ–°å¢ï¼‰

**å†…å®¹**:
- âœ… æ ¸å¿ƒåŸåˆ™ç¡®è®¤ï¼ˆåŠŸèƒ½å¼€æ”¾ã€å…è´¹æ°¸ä¹…ã€åŒæ¨¡å‹ç­‰ï¼‰
- âœ… æŠ€æœ¯æ¶æ„ç¡®è®¤ï¼ˆè®¾å¤‡è¯†åˆ«ã€æ•°æ®åº“ã€æ¶ˆè´¹è®¡é‡ç­‰ï¼‰
- âœ… å®‰å…¨æœºåˆ¶ç¡®è®¤ï¼ˆé˜²ä¼ªé€ ã€åŠ å¯†ã€æƒé™æ§åˆ¶ç­‰ï¼‰
- âœ… UI/UXç¡®è®¤ï¼ˆæ‰€æœ‰ç•Œé¢æ¸…å•ï¼‰
- âœ… è·¨å¹³å°ç¡®è®¤ï¼ˆmacOSã€Windowsã€Linuxï¼‰
- âœ… æ–‡æ¡£ç¡®è®¤ï¼ˆéšç§æ”¿ç­–ã€ç”¨æˆ·åè®®ç­‰ï¼‰
- âœ… æµ‹è¯•ç¡®è®¤ï¼ˆåŠŸèƒ½ã€å®‰å…¨ã€æ€§èƒ½ã€å…¼å®¹æ€§ï¼‰
- âœ… éƒ¨ç½²ç¡®è®¤ï¼ˆè¿ç§»ã€å¤‡ä»½ã€æ—¥å¿—ã€ç›‘æ§ï¼‰
- âœ… è¿è¥å·¥å…·ç¡®è®¤ï¼ˆæ¿€æ´»ç ç”Ÿæˆã€ç»Ÿè®¡ã€æŠ¥è¡¨ï¼‰
- âœ… åˆè§„æ€§ç¡®è®¤ï¼ˆGDPRã€æ•°æ®ä¿æŠ¤ï¼‰

**ä»·å€¼**:
- âœ… ç³»ç»ŸåŒ–çš„å®æ–½æŒ‡å—
- âœ… é˜²æ­¢é—æ¼å…³é”®ç‚¹
- âœ… è¦†ç›–200+æ£€æŸ¥é¡¹

#### 6. å¸¸è§é™·é˜±æé†’ï¼ˆæ–°å¢ï¼‰

**å†…å®¹**:
1. ä¸è¦é—æ¼model_sourceå­—æ®µ
2. ä¸è¦å¼ºåˆ¶è¦æ±‚ç”¨æˆ·ä¿¡æ¯
3. ä¸è¦åœ¨æ—¥å¿—ä¸­è®°å½•API Key
4. ä¸è¦å¿˜è®°å…è´¹æ°¸ä¹…
5. ä¸è¦é™åˆ¶åŠŸèƒ½è®¿é—®
6. ä¸è¦å¿½ç•¥é™çº§æ–¹æ¡ˆ
7. ä¸è¦å¿˜è®°æ•°æ®è¿ç§»
8. ä¸è¦è·³è¿‡å®‰å…¨æµ‹è¯•

**ä»·å€¼**:
- âœ… åŸºäºç»éªŒçš„å®ç”¨å»ºè®®
- âœ… é¿å…å¸¸è§é”™è¯¯
- âœ… æé«˜å®æ–½æˆåŠŸç‡

#### 7. è¿­ä»£ç­–ç•¥ï¼ˆæ–°å¢ï¼‰

**å†…å®¹**:
- ä¼˜å…ˆçº§æ’åºï¼ˆP0-P3ï¼‰
- Sprintåˆ’åˆ†ï¼ˆ10ä¸ªSprintï¼‰
- æ¯Sprintäº¤ä»˜ç‰©å’ŒéªŒæ”¶æ ‡å‡†

**ä»·å€¼**:
- âœ… æ¸…æ™°çš„å¼€å‘è·¯çº¿å›¾
- âœ… å¯æ‰§è¡Œçš„å®æ–½è®¡åˆ’
- âœ… é£é™©å¯æ§

### ğŸ“Š æ–‡æ¡£å®Œæ•´æ€§è¯„ä¼°

| ç»´åº¦ | v1.0 | v1.1 | æ”¹è¿› |
|-----|------|------|------|
| åŠŸèƒ½å®Œæ•´æ€§ | âœ… å®Œæ•´ | âœ… å®Œæ•´ | - |
| æŠ€æœ¯æ–¹æ¡ˆ | âœ… å®Œæ•´ | âœ… å®Œæ•´ | - |
| éšç§åˆè§„ | âš ï¸ æœ‰çŸ›ç›¾ | âœ… å®Œæ•´ | æ¶ˆé™¤çŸ›ç›¾ï¼Œç¬¦åˆGDPR |
| æ•°æ®å®‰å…¨ | âš ï¸ ç®€ç•¥ | âœ… è¯¦ç»† | åˆ†ç±»å­˜å‚¨ï¼Œæªæ–½å…·ä½“ |
| å®æ–½æŒ‡å¯¼ | âš ï¸ ç¼ºå°‘æ£€æŸ¥æ¸…å• | âœ… å®Œæ•´ | 200+é¡¹æ£€æŸ¥æ¸…å• |
| å¯æ“ä½œæ€§ | ğŸŸ¡ ä¸­ç­‰ | âœ… ä¼˜ç§€ | é™·é˜±æé†’ï¼Œè¿­ä»£ç­–ç•¥ |

### ğŸ¯ v1.1 ç‰ˆæœ¬çŠ¶æ€

- âœ… **åŠŸèƒ½è®¾è®¡**: å®Œæ•´ã€æ¸…æ™°ã€å¯æ‰§è¡Œ
- âœ… **éšç§åˆè§„**: ç¬¦åˆGDPRç†å¿µï¼Œæ— çŸ›ç›¾
- âœ… **æ•°æ®å®‰å…¨**: åˆ†ç±»ä¿æŠ¤ï¼Œæªæ–½å…·ä½“
- âœ… **å®æ–½æŒ‡å¯¼**: ç³»ç»ŸåŒ–æ£€æŸ¥æ¸…å•ï¼Œ200+é¡¹
- âœ… **å¯ç»´æŠ¤æ€§**: ç‰ˆæœ¬å†å²ã€æ›´æ–°è¯´æ˜å®Œæ•´
- âœ… **å‡†å¤‡å°±ç»ª**: å¯ä»¥å¼€å§‹å®æ–½

### ğŸ“ å»ºè®®

1. **æ³•åŠ¡å®¡æ ¸**: éšç§æ”¿ç­–å’Œç”¨æˆ·åè®®éœ€è¦ä¸“ä¸šæ³•åŠ¡å®¡æ ¸
2. **åŸå‹è®¾è®¡**: UI/UXéƒ¨åˆ†å»ºè®®å…ˆåšåŸå‹ï¼Œå†å¼€å‘
3. **åˆ†é˜¶æ®µå®æ–½**: ä¸¥æ ¼æŒ‰ç…§P0â†’P1â†’P2â†’P3ä¼˜å…ˆçº§
4. **å……åˆ†æµ‹è¯•**: ç‰¹åˆ«æ˜¯å®‰å…¨æµ‹è¯•å’Œè·¨å¹³å°æµ‹è¯•
5. **ç”¨æˆ·åé¦ˆ**: Phase 1å®Œæˆåï¼Œæ”¶é›†ç”¨æˆ·åé¦ˆå†è¿­ä»£

---

## ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | è¯´æ˜ | ä½œè€… |
|-----|------|------|------|
| v1.0 | 2026-01-05 | åˆå§‹ç‰ˆæœ¬ | æ·±åœ³ç‹å“¥ & AI |
| v1.1 | 2026-01-05 | æœ€ç»ˆæ¸…æ´å®æ–½ç‰ˆï¼š<br/>1. ä¿®æ­£éšç§ä¿æŠ¤ç« èŠ‚ï¼ˆç”¨æˆ·ä¿¡æ¯å¯é€‰ï¼‰<br/>2. å®Œå–„æ•°æ®å®‰å…¨è¯´æ˜ï¼ˆåˆ†ç±»å­˜å‚¨ï¼‰<br/>3. æ‰©å±•éšç§æ”¿ç­–å†…å®¹ï¼ˆGDPRåˆè§„ï¼‰<br/>4. è¡¥å……æ•°æ®å¯¼å‡ºåŠŸèƒ½ï¼ˆæ•°æ®å¯æºå¸¦æƒï¼‰<br/>5. æ·»åŠ å®æ–½å‰æ£€æŸ¥æ¸…å•ï¼ˆ200+æ£€æŸ¥é¡¹ï¼‰<br/>6. æ·»åŠ å¸¸è§é™·é˜±æé†’å’Œè¿­ä»£ç­–ç•¥ | æ·±åœ³ç‹å“¥ & AI |

---

**æ–‡æ¡£çŠ¶æ€**: âœ… è§„åˆ’å®Œæˆï¼Œå‡†å¤‡å®æ–½  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.1ï¼ˆæœ€ç»ˆæ¸…æ´å®æ–½ç‰ˆï¼‰  
**å½“å‰é¡¹ç›®ç‰ˆæœ¬**: v1.8.0  
**æœ€åæ›´æ–°**: 2026-01-05  
**ç»´æŠ¤è€…**: MindVoice å›¢é˜Ÿ

---

**ğŸ“Œ é‡è¦æç¤º**:

1. æœ¬æ–‡æ¡£æ˜¯å®Œæ•´çš„è§„åˆ’æ–‡æ¡£ï¼Œå®é™…å®æ–½æ—¶è¯·æŒ‰é˜¶æ®µæ¨è¿›
2. å„é˜¶æ®µäº¤ä»˜ç‰©éœ€è¦ç»è¿‡å……åˆ†æµ‹è¯•å†è¿›å…¥ä¸‹ä¸€é˜¶æ®µ
3. ç”¨æˆ·éšç§å’Œæ•°æ®å®‰å…¨æ˜¯æœ€é«˜ä¼˜å…ˆçº§
4. ä¿æŒä¸ç°æœ‰ä»£ç åº“çš„å…¼å®¹æ€§
5. å®šæœŸæ›´æ–°æ–‡æ¡£ï¼Œè®°å½•å®æ–½è¿‡ç¨‹ä¸­çš„è°ƒæ•´

**ğŸš€ å¼€å§‹å®æ–½**: è¯·å‚è€ƒ"åä¸‰ã€æŠ€æœ¯å®æ–½"ç« èŠ‚çš„é˜¶æ®µåˆ’åˆ†

---

## å®æ–½å‰æœ€ç»ˆæ£€æŸ¥æ¸…å•

### âœ… æ ¸å¿ƒåŸåˆ™ç¡®è®¤

- [ ] **åŠŸèƒ½å…¨éƒ¨å¼€æ”¾**: ç¡®è®¤æ‰€æœ‰åŠŸèƒ½æ¨¡å—å¯¹æ‰€æœ‰ç­‰çº§å®Œå…¨å¼€æ”¾
- [ ] **å…è´¹æ°¸ä¹…**: ç¡®è®¤æ–°ç”¨æˆ·è‡ªåŠ¨è·å¾—FREEæ°¸ä¹…æƒé™
- [ ] **ä»…é¢åº¦åŒºåˆ†**: ç¡®è®¤ä¸åŒç­‰çº§ä»…åœ¨æœˆåº¦é¢åº¦å’Œå®¢æœæ”¯æŒä¸Šæœ‰å·®å¼‚
- [ ] **åŒæ¨¡å‹æ”¯æŒ**: ç¡®è®¤æ”¯æŒå‚å•†æ¨¡å‹ï¼ˆè®¡è´¹ï¼‰å’Œç”¨æˆ·è‡ªå¤‡æ¨¡å‹ï¼ˆä¸è®¡è´¹ï¼‰
- [ ] **ç”¨æˆ·ä¿¡æ¯å¯é€‰**: ç¡®è®¤æ˜µç§°ã€é‚®ç®±ã€å¤´åƒç­‰å®Œå…¨å¯é€‰ï¼Œä¸å¼ºåˆ¶

### ğŸ“‹ æŠ€æœ¯æ¶æ„ç¡®è®¤

**è®¾å¤‡è¯†åˆ«**:
- [ ] è®¾å¤‡IDåŸºäºç¡¬ä»¶ä¿¡æ¯ï¼Œç¨³å®šå¯é 
- [ ] æ”¯æŒé‡è£…æ¢å¤ï¼ˆè®¾å¤‡IDä¿æŒä¸€è‡´ï¼‰
- [ ] è·¨å¹³å°æ”¯æŒï¼ˆmacOS, Windows, Linuxï¼‰
- [ ] é™çº§æ–¹æ¡ˆï¼ˆæ— æ³•è·å–ç¡¬ä»¶ä¿¡æ¯æ—¶ï¼‰

**æ•°æ®åº“è®¾è®¡**:
- [ ] è¡¨ç»“æ„å®Œæ•´ï¼ˆè®¾å¤‡ã€ä¼šå‘˜ã€ç”¨æˆ·ä¿¡æ¯ã€æ¶ˆè´¹ã€å†å²ï¼‰
- [ ] ç´¢å¼•ä¼˜åŒ–ï¼ˆæŸ¥è¯¢æ€§èƒ½ï¼‰
- [ ] çº¦æŸå®Œæ•´ï¼ˆæ•°æ®å®Œæ•´æ€§ï¼‰
- [ ] è¿ç§»è„šæœ¬å‡†å¤‡å°±ç»ª

**æ¶ˆè´¹è®¡é‡**:
- [ ] ASRè®¡é‡é›†æˆï¼ˆæå–time_infoï¼‰
- [ ] LLMè®¡é‡é›†æˆï¼ˆåŒºåˆ†å‚å•†/ç”¨æˆ·æ¨¡å‹ï¼‰
- [ ] é¢åº¦æ£€æŸ¥å‰ç½®ï¼ˆç”¨æˆ·è‡ªå¤‡æ¨¡å‹è·³è¿‡ï¼‰
- [ ] æœˆåº¦é‡ç½®æœºåˆ¶ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰
- [ ] model_sourceå­—æ®µæ­£ç¡®è®°å½•

**æ¿€æ´»ç ç³»ç»Ÿ**:
- [ ] æ¿€æ´»ç æ ¼å¼è§„èŒƒï¼ˆTIER-MONTHS-XXXX-XXXXï¼‰
- [ ] ç”Ÿæˆå·¥å…·å®Œæˆï¼ˆæ‰¹é‡ç”Ÿæˆè„šæœ¬ï¼‰
- [ ] éªŒè¯é€»è¾‘å®Œæ•´ï¼ˆæ ¼å¼+é»‘åå•+å¯é€‰äº‘ç«¯ï¼‰
- [ ] é»‘åå•æœºåˆ¶ï¼ˆé˜²æ­¢é‡å¤ä½¿ç”¨ï¼‰

**ç”¨æˆ·ä¿¡æ¯**:
- [ ] æ•°æ®åº“è¡¨ï¼ˆuser_profilesï¼‰
- [ ] APIæ¥å£ï¼ˆCRUDå®Œæ•´ï¼‰
- [ ] å¤´åƒä¸Šä¼ ï¼ˆå¤§å°é™åˆ¶ã€æ ¼å¼éªŒè¯ã€å®‰å…¨æ£€æŸ¥ï¼‰
- [ ] UIç•Œé¢ï¼ˆå‹å¥½ã€ç›´è§‚ã€æ˜ç¡®"å¯é€‰"ï¼‰

**æ¨¡å‹é…ç½®**:
- [ ] åŒæ¨¡å‹åˆ‡æ¢ï¼ˆå‚å•† â†” ç”¨æˆ·è‡ªå¤‡ï¼‰
- [ ] API KeyåŠ å¯†å­˜å‚¨
- [ ] è¿æ¥æµ‹è¯•åŠŸèƒ½
- [ ] è®¡è´¹é€»è¾‘åŒºåˆ†ï¼ˆä»…å‚å•†æ¨¡å‹è®¡å…¥é¢åº¦ï¼‰

### ğŸ”’ å®‰å…¨æœºåˆ¶ç¡®è®¤

- [ ] è®¾å¤‡IDé˜²ä¼ªé€ ï¼ˆSHA-256 + ç›å€¼ï¼‰
- [ ] æ¿€æ´»ç é˜²é‡å¤ï¼ˆé»‘åå•æœºåˆ¶ï¼‰
- [ ] æ•°æ®åŠ å¯†å­˜å‚¨ï¼ˆAES-256ï¼‰
- [ ] æ–‡ä»¶æƒé™æ§åˆ¶ï¼ˆchmod 600ï¼‰
- [ ] SQLæ³¨å…¥é˜²æŠ¤
- [ ] è·¯å¾„éå†é˜²æŠ¤ï¼ˆå¤´åƒè®¿é—®ï¼‰
- [ ] ç”¨æˆ·API Keyä¸è®°å½•æ—¥å¿—

### ğŸ¨ UI/UXç¡®è®¤

- [ ] ä¼šå‘˜ä¿¡æ¯ç•Œé¢ï¼ˆæ¸…æ™°æ˜¾ç¤ºç­‰çº§ã€é¢åº¦ã€è¿‡æœŸæ—¶é—´ï¼‰
- [ ] ç”¨æˆ·ä¿¡æ¯ç•Œé¢ï¼ˆæ˜ç¡®æ ‡æ³¨"å¯é€‰"ï¼‰
- [ ] æ¨¡å‹é…ç½®ç•Œé¢ï¼ˆå‚å•† vs ç”¨æˆ·è‡ªå¤‡åˆ‡æ¢ï¼‰
- [ ] æ¿€æ´»ç•Œé¢ï¼ˆç®€å•ã€å‹å¥½ï¼‰
- [ ] æ¶ˆè´¹å†å²ç•Œé¢ï¼ˆæŒ‰æœˆæŸ¥è¯¢ã€è¯¦ç»†è®°å½•ï¼‰
- [ ] å®æ—¶æç¤ºï¼ˆéä¾µå…¥å¼é¢åº¦æŒ‡ç¤ºï¼‰
- [ ] è¶…é™å¯¹è¯æ¡†ï¼ˆæ¸…æ™°è¯´æ˜ã€æä¾›è§£å†³æ–¹æ¡ˆï¼‰
- [ ] æ¬¢è¿ç•Œé¢ï¼ˆé¦–æ¬¡å®‰è£…ï¼Œè¯´æ˜å…è´¹æ°¸ä¹…æƒé™ï¼‰
- [ ] åˆ°æœŸæé†’ï¼ˆ7/3/1å¤©æå‰æé†’ï¼‰

### ğŸ“± è·¨å¹³å°ç¡®è®¤

- [ ] macOSæµ‹è¯•ï¼ˆ11+ï¼‰
- [ ] Windowsæµ‹è¯•ï¼ˆ10+ï¼‰
- [ ] Linuxæµ‹è¯•ï¼ˆUbuntu 20.04+ï¼‰
- [ ] è·¯å¾„å¤„ç†ï¼ˆ`~` å±•å¼€ï¼‰
- [ ] æ–‡ä»¶æƒé™ï¼ˆè·¨å¹³å°å…¼å®¹ï¼‰

### ğŸ“„ æ–‡æ¡£ç¡®è®¤

- [ ] éšç§æ”¿ç­–ï¼ˆæ˜ç¡®è¯´æ˜ç”¨æˆ·ä¿¡æ¯å¯é€‰ã€æœ¬åœ°å­˜å‚¨ï¼‰
- [ ] ç”¨æˆ·åè®®ï¼ˆä¼šå‘˜æƒç›Šã€é€€æ¬¾æ”¿ç­–ï¼‰
- [ ] ç”¨æˆ·æ‰‹å†Œï¼ˆæ“ä½œæŒ‡å—ï¼‰
- [ ] APIæ–‡æ¡£ï¼ˆå®Œæ•´æ¥å£åˆ—è¡¨ï¼‰
- [ ] æ•°æ®åº“æ–‡æ¡£ï¼ˆè¡¨ç»“æ„ã€å­—æ®µè¯´æ˜ï¼‰

### ğŸ§ª æµ‹è¯•ç¡®è®¤

- [ ] åŠŸèƒ½æµ‹è¯•ï¼ˆå®Œæ•´æµç¨‹ï¼‰
- [ ] å®‰å…¨æµ‹è¯•ï¼ˆé˜²ä½œå¼Šã€é˜²ç¯¡æ”¹ï¼‰
- [ ] æ€§èƒ½æµ‹è¯•ï¼ˆå“åº”é€Ÿåº¦ã€å†…å­˜å ç”¨ï¼‰
- [ ] å…¼å®¹æ€§æµ‹è¯•ï¼ˆå¤šå¹³å°ã€å¤šåˆ†è¾¨ç‡ï¼‰
- [ ] è¾¹ç•Œæµ‹è¯•ï¼ˆè¶…é™ã€è¿‡æœŸã€é‡è£…ç­‰ï¼‰

### ğŸš€ éƒ¨ç½²ç¡®è®¤

- [ ] æ•°æ®è¿ç§»è„šæœ¬ï¼ˆå‘åå…¼å®¹ï¼‰
- [ ] å¤‡ä»½æœºåˆ¶ï¼ˆè‡ªåŠ¨å¤‡ä»½ã€æ‰‹åŠ¨å¯¼å‡ºï¼‰
- [ ] æ—¥å¿—ç³»ç»Ÿï¼ˆåº”ç”¨æ—¥å¿—ã€é”™è¯¯æ—¥å¿—ã€APIæ—¥å¿—ï¼‰
- [ ] ç›‘æ§æœºåˆ¶ï¼ˆæœ¬åœ°ç›‘æ§ã€å¼‚å¸¸æ£€æµ‹ï¼‰
- [ ] æ¢å¤æ–¹æ¡ˆï¼ˆæ•°æ®æ¢å¤ã€ç‰ˆæœ¬å›æ»šï¼‰

### ğŸ“Š è¿è¥å·¥å…·ç¡®è®¤

- [ ] æ¿€æ´»ç ç”Ÿæˆå·¥å…·ï¼ˆæ‰¹é‡ç”Ÿæˆã€å¯¼å‡ºCSVï¼‰
- [ ] ç»Ÿè®¡è„šæœ¬ï¼ˆä¼šå‘˜ç»Ÿè®¡ã€æ¶ˆè´¹ç»Ÿè®¡ï¼‰
- [ ] æŠ¥è¡¨å·¥å…·ï¼ˆæ—¥æŠ¥ã€å‘¨æŠ¥ã€æœˆæŠ¥ï¼‰
- [ ] å®¢æœåå°ï¼ˆæŸ¥è¯¢ç”¨æˆ·ã€æ‰‹åŠ¨ç»­è´¹ï¼‰

### âš–ï¸ åˆè§„æ€§ç¡®è®¤

- [ ] éšç§æ”¿ç­–å®Œæ•´ï¼ˆæ³•åŠ¡å®¡æ ¸ï¼‰
- [ ] ç”¨æˆ·åè®®å®Œæ•´ï¼ˆæ³•åŠ¡å®¡æ ¸ï¼‰
- [ ] æ•°æ®ä¿æŠ¤æªæ–½ï¼ˆGDPRç†å¿µï¼‰
- [ ] å„¿ç«¥éšç§ä¿æŠ¤ï¼ˆ13å²ä»¥ä¸‹ï¼‰
- [ ] æ•°æ®å¯¼å‡ºåŠŸèƒ½ï¼ˆæ•°æ®å¯æºå¸¦æƒï¼‰
- [ ] æ•°æ®åˆ é™¤åŠŸèƒ½ï¼ˆè¢«é—å¿˜æƒï¼‰

---

## å®æ–½å»ºè®®

### ğŸ¯ ä¼˜å…ˆçº§æ’åº

**P0ï¼ˆå¿…éœ€ï¼ŒPhase 1ï¼‰**:
1. è®¾å¤‡è¯†åˆ«ä¸æ³¨å†Œï¼ˆå…è´¹æ°¸ä¹…ä¼šå‘˜ï¼‰
2. ä¼šå‘˜ä¿¡æ¯ç®¡ç†ï¼ˆç­‰çº§ã€é¢åº¦ã€è¿‡æœŸæ—¶é—´ï¼‰
3. æ¶ˆè´¹è®¡é‡ï¼ˆASR + LLMï¼Œæ”¯æŒåŒæ¨¡å‹ï¼‰
4. é¢åº¦æ£€æŸ¥ï¼ˆå‰ç½®éªŒè¯ï¼‰
5. æ¿€æ´»ç ç³»ç»Ÿï¼ˆéªŒè¯ã€é»‘åå•ï¼‰
6. åŸºç¡€UIï¼ˆä¼šå‘˜ä¿¡æ¯ã€æ¿€æ´»ç•Œé¢ï¼‰

**P1ï¼ˆé‡è¦ï¼ŒPhase 1ï¼‰**:
7. ç”¨æˆ·ä¿¡æ¯ç®¡ç†ï¼ˆæ˜µç§°ã€é‚®ç®±ã€å¤´åƒï¼‰
8. æ¨¡å‹é…ç½®ç®¡ç†ï¼ˆå‚å•† â†” ç”¨æˆ·è‡ªå¤‡åˆ‡æ¢ï¼‰
9. æ¶ˆè´¹å†å²ç•Œé¢
10. å®æ—¶æç¤ºç»„ä»¶
11. åˆ°æœŸæé†’
12. æ•°æ®å¤‡ä»½ä¸å¯¼å‡º

**P2ï¼ˆå¢å¼ºï¼ŒPhase 1.5ï¼‰**:
13. æ¬¢è¿ç•Œé¢ä¼˜åŒ–
14. UI/UXç»†èŠ‚ä¼˜åŒ–
15. æ€§èƒ½ä¼˜åŒ–
16. å¼‚å¸¸æ£€æµ‹
17. è¿è¥å·¥å…·ï¼ˆæ¿€æ´»ç ç”Ÿæˆï¼‰
18. ç»Ÿè®¡æŠ¥è¡¨

**P3ï¼ˆæœªæ¥ï¼ŒPhase 2+ï¼‰**:
19. äº‘ç«¯éªŒè¯ï¼ˆæ¿€æ´»ç ï¼‰
20. äº‘ç«¯åŒæ­¥ï¼ˆå¤šè®¾å¤‡ï¼‰
21. æ¨å¹¿ç³»ç»Ÿ
22. ä¼ä¸šç‰ˆ

### âš ï¸ å¸¸è§é™·é˜±æé†’

1. **ä¸è¦é—æ¼model_sourceå­—æ®µ**: LLMæ¶ˆè´¹è®°å½•å¿…é¡»åŒºåˆ†å‚å•†/ç”¨æˆ·æ¨¡å‹
2. **ä¸è¦å¼ºåˆ¶è¦æ±‚ç”¨æˆ·ä¿¡æ¯**: æ˜µç§°ã€é‚®ç®±ç­‰å¿…é¡»æ ‡æ³¨"å¯é€‰"
3. **ä¸è¦åœ¨æ—¥å¿—ä¸­è®°å½•API Key**: ç”¨æˆ·è‡ªå¤‡æ¨¡å‹çš„å¯†é’¥ä¸å¾—è®°å½•
4. **ä¸è¦å¿˜è®°å…è´¹æ°¸ä¹…**: æ–°ç”¨æˆ·æ³¨å†Œæ—¶expires_atå¿…é¡»ä¸ºNULL
5. **ä¸è¦é™åˆ¶åŠŸèƒ½è®¿é—®**: æ‰€æœ‰ç­‰çº§å‡å¯è®¿é—®æ‰€æœ‰åŠŸèƒ½æ¨¡å—
6. **ä¸è¦å¿½ç•¥é™çº§æ–¹æ¡ˆ**: è®¾å¤‡IDè·å–å¤±è´¥æ—¶è¦æœ‰fallback
7. **ä¸è¦å¿˜è®°æ•°æ®è¿ç§»**: ç°æœ‰ç”¨æˆ·å‡çº§æ—¶è¦ä¿æŒæ•°æ®å®Œæ•´æ€§
8. **ä¸è¦è·³è¿‡å®‰å…¨æµ‹è¯•**: æ¿€æ´»ç ã€æ¶ˆè´¹è®°å½•ç­‰è¦é˜²ä½œå¼Š

### ğŸ”„ è¿­ä»£ç­–ç•¥

**Sprint 1-2**: æ ¸å¿ƒåŸºç¡€ï¼ˆè®¾å¤‡IDã€æ•°æ®åº“ã€ä¼šå‘˜ç®¡ç†ï¼‰
**Sprint 3-4**: æ¶ˆè´¹è®¡é‡ï¼ˆASR + LLMï¼ŒåŒæ¨¡å‹æ”¯æŒï¼‰
**Sprint 5-6**: æ¿€æ´»ç ç³»ç»Ÿ + ç”¨æˆ·ä¿¡æ¯
**Sprint 7-8**: UIå®Œå–„ + æ¨¡å‹é…ç½®
**Sprint 9-10**: æµ‹è¯•ä¼˜åŒ– + è¿è¥å·¥å…·

æ¯ä¸ªSprintç»“æŸåï¼š
- âœ… ä»£ç è¯„å®¡
- âœ… åŠŸèƒ½æµ‹è¯•
- âœ… æ–‡æ¡£æ›´æ–°
- âœ… Demoæ¼”ç¤º

---

**ğŸ“Œ æœ€åæé†’**:

1. âœ… **å…ˆç®€åç¹**: Phase 1 å®Œå…¨æœ¬åœ°åŒ–ï¼ŒPhase 2 å†è€ƒè™‘äº‘ç«¯
2. âœ… **å…ˆåŠŸèƒ½åä¼˜åŒ–**: å…ˆè·‘é€šæµç¨‹ï¼Œå†ä¼˜åŒ–æ€§èƒ½
3. âœ… **å…ˆæµ‹è¯•åä¸Šçº¿**: å……åˆ†æµ‹è¯•ï¼Œç¨³å®šåå†å‘å¸ƒ
4. âœ… **ä¿æŒå‘åå…¼å®¹**: ç°æœ‰åŠŸèƒ½ä¸å—å½±å“
5. âœ… **ç”¨æˆ·éšç§ä¼˜å…ˆ**: æ•°æ®å®‰å…¨æ˜¯æœ€é«˜ä¼˜å…ˆçº§
6. âœ… **åŠŸèƒ½å…¨éƒ¨å¼€æ”¾**: ä¸è¦åœ¨å®æ–½æ—¶æ·»åŠ æƒé™æ£€æŸ¥
7. âœ… **åŒæ¨¡å‹æ”¯æŒ**: ç¡®ä¿ç”¨æˆ·è‡ªå¤‡æ¨¡å‹ä¸è®¡è´¹

**ğŸ‰ å‡†å¤‡å¥½äº†å—ï¼Ÿå¼€å§‹å®æ–½å§ï¼**

æœ‰é—®é¢˜éšæ—¶å‚è€ƒæœ¬æ–‡æ¡£ï¼Œæˆ–è”ç³» manwjh@126.comã€‚

---

*End of Document*

